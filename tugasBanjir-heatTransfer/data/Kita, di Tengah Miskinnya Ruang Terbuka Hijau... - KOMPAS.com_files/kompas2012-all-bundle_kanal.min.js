/* 1703111608: kompas2012-all-bundle_kanal.js */
function ddtabcontent(a){
    this.tabinterfaceid=a;
    this.tabs=document.getElementById(a).getElementsByTagName("a");
    this.enabletabpersistence=true;
    this.hottabspositions=[];
    this.subcontentids=[];
    this.revcontentids=[];
    this.selectedClassTarget="link"
    }
    ddtabcontent.getCookie=function(a){
    var b=new RegExp(a+"=[^;]+","i");
    if(document.cookie.match(b)){
        return document.cookie.match(b)[0].split("=")[1]
        }
        return""
    };
    
ddtabcontent.setCookie=function(a,b){
    document.cookie=a+"="+b+";path=/"
    };
    
ddtabcontent.prototype={
    expandit:function(a){
        this.cancelautorun();
        var b="";
        try{
            if(typeof a=="string"&&document.getElementById(a).getAttribute("rel")){
                b=document.getElementById(a)
                }else{
                if(parseInt(a)!=NaN&&this.tabs[a].getAttribute("rel")){
                    b=this.tabs[a]
                    }
                }
        }catch(c){
    alert("Invalid Tab ID or position entered!")
    }
    if(b!=""){
    this.expandtab(b)
    }
},
setpersist:function(a){
    this.enabletabpersistence=a
    },
setfade:function(a){
    this.enablefade=a
    },
setselectedClassTarget:function(a){
    this.selectedClassTarget=a||"link"
    },
getselectedClassTarget:function(a){
    return(this.selectedClassTarget==("linkparent".toLowerCase()))?a.parentNode:a
    },
expandtab:function(b){
    var c=b.getAttribute("rel");
    var d=(b.getAttribute("rev"))?","+b.getAttribute("rev").replace(/\s+/,"")+",":"";
    this.expandsubcontent(c);
    this.expandrevcontent(d);
    for(var a=0;a<this.tabs.length;a++){
        this.getselectedClassTarget(this.tabs[a]).className=(this.tabs[a].getAttribute("rel")==c)?"selected":""
        }
        if(this.enabletabpersistence){
        ddtabcontent.setCookie(this.tabinterfaceid,b.tabposition)
        }
    },
expandsubcontent:function(c){
    for(var b=0;b<this.subcontentids.length;b++){
        var a=document.getElementById(this.subcontentids[b]);
        a.style.display=(a.id==c)?"block":"none";
        if(this.enablefade){
            fadeFx=new Fx.Style(this.subcontentids[b],"opacity",{
                duration:1000,
                transition:Fx.Transitions.Quart.easeInOut
                });
            fadeFx.start(0.2,1)
            }
        }
    },
expandrevcontent:function(c){
    var a=this.revcontentids;
    for(var b=0;b<a.length;b++){
        document.getElementById(a[b]).style.display=(c.indexOf(","+a[b]+",")!=-1)?"block":"none"
        }
    },
autorun:function(){
    var b=this.automode_currentTabIndex;
    var a=this.hottabspositions;
    this.expandtab(this.tabs[a[b]]);
    this.automode_currentTabIndex=(b<a.length-1)?b+1:0
    },
cancelautorun:function(){
    if(typeof this.autoruntimer!="undefined"){
        clearInterval(this.autoruntimer)
        }
    },
init:function(a){
    var e=ddtabcontent.getCookie(this.tabinterfaceid);
    var d=true;
    this.automodeperiod=a||0;
    for(var c=0;c<this.tabs.length;c++){
        this.tabs[c].tabposition=c;
        if(this.tabs[c].getAttribute("rel")){
            var b=this;
            this.hottabspositions[this.hottabspositions.length]=c;
            this.subcontentids[this.subcontentids.length]=this.tabs[c].getAttribute("rel");
            this.tabs[c].onclick=function(){
                b.expandtab(this);
                b.cancelautorun();
                return false
                };
                
            if(this.tabs[c].getAttribute("rev")){
                this.revcontentids=this.revcontentids.concat(this.tabs[c].getAttribute("rev").split(/\s*,\s*/))
                }
                if(this.enabletabpersistence&&parseInt(e)==c||!this.enabletabpersistence&&this.getselectedClassTarget(this.tabs[c]).className=="selected"){
                this.expandtab(this.tabs[c]);
                d=false;
                this.automode_currentTabIndex=(c>0)?0:1
                }
            }
    }
    if(d){
    this.expandtab(this.tabs[this.hottabspositions[0]])
    }
    if(parseInt(this.automodeperiod)>500&&this.hottabspositions.length>1){
    this.automode_currentTabIndex=this.automode_currentTabIndex||0;
    this.autoruntimer=setInterval(function(){
        b.autorun()
        },this.automodeperiod)
    }
}
};
(function(a){
    a(function(){
        a.extend({
            articleNavigation:function(e,c,b){
                var d={
                    container:"",
                    next_text:"Artikel Selanjutnya",
                    prev_text:"Artikel Sebelumnya",
                    trigger:"a[rel=article_nav]"
                };
                
                b=a.extend(d,b);
                a.getJSON("http://api.kompas.com/data/get_next_prev_article/"+e+"/"+c+"/?jsoncallback=?",function(f){
                    if(f.status==1&&a("a[rel=article_nav]").length){
                        if(f.next!=""){
                            a("a[rel=article_nav]:eq(1)").attr("href",f.next.UrlPath).text(b.next_text)
                            }
                            if(f.prev!=""){
                            a("a[rel=article_nav]:eq(0)").attr("href",f.prev.UrlPath).text(b.prev_text)
                            }
                        }
                })
        },
        articleStatistic:function(c,b){
            var d={
                container:"#text_",
                overwrite:true,
                param:"",
                template:"| Dibaca %r kali"
            };
            
            b=a.extend(d,b);
            if(c!=""){
                var domain=window.location.href;
                domain = domain.replace(/\//g,"|-|");
                domain = encodeURIComponent(domain);
                a.getJSON("http://api.kompas.com/data/getreadcounter/"+c+b.param+"/"+domain+"/?&jsoncallback=?",function(e){
                    if(e.status==1){
                        a.each(e.results,function(h,g){
                            var j=b.template.replace("%r",g.ReadCount);
//                            j=j.replace("%c",g.CommentCount);
                            (b.overwrite)?a(b.container+g.TextID).html(j):a(b.container+g.TextID).append(j)
                            })
                        }else{
                        var f=c.split("-");
                        a.each(f,function(g){
                            a(b.container+f[g]).remove()
                            })
                        }
                    })
            }
        },
    directoryStatisticRead:function(c,b){
        var d={
            container:"#read_",
            overwrite:true,
            template:"| Dibaca %r kali | %c Komentar"
        };
        
        b=a.extend(d,b);
        if(c!=""){
            a.getJSON("http://api.kompas.com/data/directory_read_comment/"+c+"/?jsoncallback=?",function(e){
                if(e.status==1){
                    a.each(e.results,function(h,g){
                        var j=b.template.replace("%r",g.ReadCount);
                        j=j.replace("%c",g.CommentCount);
                        (b.overwrite)?a(b.container+g.TextID).html(j):a(b.container+g.TextID).append(j)
                        })
                    }else{
                    var f=c.split("-");
                    a.each(f,function(g){
                        a(b.container+f[g]).remove()
                        })
                    }
                })
        }
    },
directoryStatisticComment:function(c,b){
    var d={
        container:"#comment_",
        overwrite:true,
        template:"| Dibaca %r kali | %c Komentar"
    };
    
    b=a.extend(d,b);
    if(c!=""){
        a.getJSON("http://api.kompas.com/data/directory_read_comment/"+c+"/?jsoncallback=?",function(e){
            if(e.status==1){
                a.each(e.results,function(h,g){
                    var j=b.template.replace("%r",g.ReadCount);
                    j=j.replace("%c",g.CommentCount);
                    (b.overwrite)?a(b.container+g.TextID).html(j):a(b.container+g.TextID).append(j)
                    })
                }else{
                var f=c.split("-");
                a.each(f,function(g){
                    a(b.container+f[g]).remove()
                    })
                }
            })
    }
},
channelCustom:function(c){
    var f={
        append:"a[rel*=kanal_append]",
        container:".box_rubrik",
        container_small:".box_rubrik_4",
        container_content:"li",
        remove:"a[rel*=kanal_remove]"
    };
    
    c=a.extend(f,c);
    var b=a(c.container+":eq(0) "+c.container_content).length;
    var d=a(c.container+":eq(0) "+c.container_content+":visible").length;
    var e=a(c.container_small+":eq(0) "+c.container_content+":visible").length;
    a(c.remove).css("opacity","0.25");
    if(b==d){
        a(c.append).css("opacity","0.25")
        }
        a(c.append).click(function(){
        if(a(this).parents("div:eq(2)").find("li:visible").length<b){
            var g=a(this).parents("div:eq(2)").find("li:visible").length;
            a(this).parents("div:eq(2)").find("li").eq(g).slideDown("fast");
            a(this).css("opacity","1");
            a(this).parent().find(c.remove).css("opacity","1");
            update_data(a(this).parents("div:eq(1)").find("strong").text(),"plus")
            }
            if(a(this).parents("div:eq(2)").find("li:visible").length==b){
            a(this).css("opacity","0.25")
            }
        });
a(c.remove).click(function(){
    var h=a(this).parents("div:eq(2)").attr("class");
    if(h.indexOf(c.container_small.substr(1))>-1){
        if(a(this).parents("div:eq(2)").find("li:visible").length>e){
            var g=a(this).parents("div:eq(2)").find("li:visible").length;
            a(this).parents("div:eq(2)").find("li").eq(--g).slideUp("fast");
            a(this).css("opacity","1");
            a(this).parent().find(c.append).css("opacity","1");
            update_data(a(this).parents("div:eq(1)").find("strong").text(),"min")
            }
            if((a(this).parents("div:eq(2)").find("li:visible").length-1)==e){
            a(this).css("opacity","0.25")
            }
        }else{
    if(a(this).parents("div:eq(2)").find("li:visible").length>d){
        var g=a(this).parents("div:eq(2)").find("li:visible").length;
        a(this).parents("div:eq(2)").find("li").eq(--g).slideUp("fast");
        a(this).css("opacity","1");
        a(this).parent().find(c.append).css("opacity","1");
        update_data(a(this).parents("div:eq(1)").find("strong").text(),"min")
        }
        if((a(this).parents("div:eq(2)").find("li:visible").length-1)==d){
        a(this).css("opacity","0.25")
        }
    }
})
},
latestCustom:function(b){
    var c={
        container:"#container_terkini",
        container_content:"li",
        container_id:"rubrik_",
        edit_button:"#mypaneltab",
        edit_container:"#mypanelcontent",
        input_checkbox:"#edit_terkini input",
        total:"#total_terkini",
        submit_button:"#terkini_submit"
    };
    
    b=a.extend(c,b);
    a(b.input_checkbox).click(function(){
        a(b.input_checkbox).attr("disabled",false);
        if(a(this).val()==0){
            a(b.input_checkbox+":not(:eq(0))").attr("checked",false)
            }else{
            a(b.input_checkbox+":eq(0)").attr("checked",false);
            if(a(b.input_checkbox+":checked").length>=3){
                a(b.input_checkbox+":not(:checked:eq(0))").attr("disabled",true)
                }
            }
        if(!a(b.input_checkbox+":checked").length){
        a(b.input_checkbox+":eq(0)").attr("checked",true)
        }
    });
a(b.edit_button).live("click",function(){
    if(a(b.edit_container).css("height")!="0px"){
        a(b.input_checkbox).each(function(){
            a(this).attr("checked",false)
            });
        if(a(b.input_checkbox+":checked").length<3){
            a(b.input_checkbox).attr("disabled",false)
            }
            a(b.container+" "+b.container_content).each(function(){
            var e=a(this).attr("rel").split("_");
            a(b.input_checkbox).each(function(){
                (a(this).val()==e[1])?a(this).attr("checked",true):null
                })
            });
        if(a(b.input_checkbox+":checked").length>=3){
            a(b.input_checkbox+":not(:checked:eq(0))").attr("disabled",true)
            }
        }
});
a(b.submit_button).click(function(){
    var g=b.container+":";
    var e=a(b.input_checkbox+":checked").length;
    if(e){
        var f=a(b.total).val();
        f=(a(b.input_checkbox+":eq(0)").is(":checked"))?f:parseInt(f-1);
        if(e==2){
            f=parseInt((f-2)/2)
            }else{
            if(e==3){
                f=parseInt((f-3)/3)
                }
            }
        a(b.container+" "+b.container_content).each(function(){
        var i=a(this);
        var h=false;
        a(b.input_checkbox+":checked").each(function(){
            if(i.attr("rel")==b.container_id+a(this).val()+"_"+f){
                h=true
                }
            });
    if(!h){
        a(this).remove()
        }
    });
a(b.input_checkbox+":checked").each(function(h){
    if(!a(b.container_content+"[rel*="+b.container_id+a(this).val()+"_"+f+"]").length){
        if(a(b.container+" "+b.container_content+":eq(0)").attr("rel")==undefined){
            a(b.container).prepend('<li style="font-weight:normal;">Loading data..</li>')
            }
            g+=(h===0)?"":";";
        g+=a(this).val()+",";
        g+=f;
        a.getJSON("http://api.kompas.com/data/lattest_article/"+a(this).val()+"/"+f+"/?jsoncallback=?",function(i){
            if(i.status==1){
                if(a(b.container+" "+b.container_content+":eq(0)").attr("rel")==undefined){
                    a(b.container+" "+b.container_content+":eq(0)").remove()
                    }
                    a(b.container).append(i.results)
                }else{}
        })
    }
});
savePreferences(g)
}
});
function d(e){
    return e.replace(" ","")
    }
},
listComment:function(e,c){
    var d={
        container:"#comment_list",
        paging:"#comment_paging",
        paging_link:"a[rel*=page_comment]",
        total:"#comment_total"
    };
    
    c=a.extend(d,c);
    b();
    a(c.paging_link).live("click",function(f){
        if(f.button==0){
            b(parseInt(a(this).attr("id").substr(2,a(this).attr("id").length)))
            }
            return false
        });
    function b(){
        var f=arguments;
        var g=(f[0]==undefined)?1:f[0];
        a.getJSON("http://api.kompas.com/comments/get_article_comments2011/"+e+"/"+g+"/?jsoncallback=?",function(h){
            if(h.status==1){
                a(c.container).html(h.results.comments);
                a(c.total).html("Ada "+h.results.total_comment+" Komentar Untuk Artikel Ini.");
                a(c.paging).html(h.results.pagging);
                if(f[0]!=undefined){
                    var i=a(".list_komentar").offset().top;
                    a("html, body").animate({
                        scrollTop:i+"px"
                        })
                    }
                }else{
            a(c.container).html("&nbsp;");
            a(c.total).empty()
            }
        })
}
},
listCommentVideo:function(e,c){
    var d={
        container:"#comment_list",
        paging:"#comment_paging",
        paging_link:"a[rel*=page_comment]",
        total:"#comment_total"
    };
    
    c=a.extend(d,c);
    b();
    a(c.paging_link).live("click",function(f){
        if(f.button==0){
            b(parseInt(a(this).attr("id").substr(2,a(this).attr("id").length)))
            }
            return false
        });
    function b(){
        var f=arguments;
        var g=(f[0]==undefined)?1:f[0];
        a.getJSON("http://api.kompas.com/comments/get_video_comments/"+e+"/"+g+"/?jsoncallback=?",function(h){
            if(h.status==1){
                a(c.container).html(h.results.comments);
                a(c.total).html("Ada "+h.results.total_comment+" Komentar Untuk Video Ini.");
                a(c.paging).html(h.results.pagging);
                if(f[0]!=undefined){
                    var i=a(".list_komentar").offset().top;
                    a("html, body").animate({
                        scrollTop:i+"px"
                        })
                    }
                }else{
            a(c.container).html("&nbsp;");
            a(c.total).empty()
            }
        })
}
},
listCommentDirectory:function(e,c){
    var d={
        container:"#comment_list",
        paging:"#comment_paging",
        paging_link:"a[rel*=page_comment]",
        total:"#comment_total"
    };
    
    c=a.extend(d,c);
    b();
    a(c.paging_link).live("click",function(f){
        if(f.button==0){
            b(parseInt(a(this).attr("id").substr(2,a(this).attr("id").length)))
            }
            return false
        });
    function b(){
        var f=arguments;
        var g=(f[0]==undefined)?1:f[0];
        a.getJSON("http://api.kompas.com/comments/get_directory_comments/"+e+"/"+g+"/?jsoncallback=?",function(h){
            if(h.status==1){
                a(c.container).html(h.results.comments);
                a(c.total).html("Ada "+h.results.total_comment+" Komentar Untuk Direktori Ini.");
                a(c.paging).html(h.results.pagging);
                if(f[0]!=undefined){
                    var i=a(".list_komentar").offset().top;
                    a("html, body").animate({
                        scrollTop:i+"px"
                        })
                    }
                }else{
            a(c.container).html("&nbsp;");
            a(c.total).empty()
            }
        })
}
},
listCommentObituari:function(e,c){
    var d={
        container:"#comment_list",
        paging:"#comment_paging",
        paging_link:"a[rel*=page_comment]",
        total:"#comment_total"
    };
    
    c=a.extend(d,c);
    b();
    a(c.paging_link).live("click",function(f){
        if(f.button==0){
            b(parseInt(a(this).attr("id").substr(2,a(this).attr("id").length)))
            }
            return false
        });
    function b(){
        var f=arguments;
        var g=(f[0]==undefined)?1:f[0];
        a.getJSON("http://api.kompas.com/comments/get_obituari_comments/"+e+"/"+g+"/?jsoncallback=?",function(h){
            if(h.status==1){
                a(c.container).html(h.results.comments);
                a(c.total).html("Ada "+h.results.total_comment+" ucapan belasungkawa.");
                a(c.paging).html(h.results.pagging);
                if(f[0]!=undefined){
                    var i=a(".list_komentar").offset().top;
                    a("html, body").animate({
                        scrollTop:i+"px"
                        })
                    }
                }else{
            a(c.container).html("&nbsp;");
            a(c.total).empty()
            }
        })
}
},
mostPopularArticles:function(b){
    var c={
        trigger:"#most_popular"
    };
    
    b=a.extend(c,b);
    a(b.trigger).click(function(){
        var d=a(this).next().find("ul");
        if(d.find("li").length==1||!d.find("li").length){
            d.html("<li>Loading data...</li>");
            a.getJSON("http://api.kompas.com/data/most_popular/?jsoncallback=?",function(e){
                if(e.status==1){
                    d.html(e.results)
                    }else{
                    d.html("<li>Data belum tersedia.</li>")
                    }
                })
        }
    })
},
mostPopularArticles2:function(){
    var b=a("#most_popular").next().find("ul");
    if(b.find("li").length==1||!b.find("li").length){
        b.html("<li>Loading data...</li>");
        a.getJSON("http://api.kompas.com/data/most_popular/?jsoncallback=?",function(c){
            if(c.status==1){
                b.html(c.results)
                }else{
                b.html("<li>Data belum tersedia.</li>")
                }
            })
    }
},
mostCommentedArticles:function(b){
    var c={
        trigger:"#most_commented"
    };
    
    b=a.extend(c,b);
    a(b.trigger).click(function(){
        var d=a(this).next().find("ul");
        if(d.find("li").length==1||!d.find("li").length){
            d.html("<li>Loading data...</li>");
            a.getJSON("http://api.kompas.com/comments/most_commented/?jsoncallback=?",function(e){
                if(e.status==1){
                    d.html(e.results)
                    }else{
                    d.html("<li>Data belum tersedia.</li>")
                    }
                })
        }
    })
},
searchBox:function(c,b){
    var d={
        blur_text:"Kata kunci",
        css_blur_property:"",
        css_focus_property:"",
        focus_text:""
    };
    
    b=a.extend(d,b);
    a(c).val(b.blur_text);
    a(c).focus(function(){
        if(b.css_focus_property!=""){
            a(this).css(b.css_focus_property,b.css_focus_value)
            }(a(this).val()==b.blur_text)?a(this).val(b.focus_text):null
        });
    a(c).blur(function(){
        var e=a(this).val();
        if(e==""){
            if(b.css_blur_property!=""){
                a(this).css(b.css_blur_property,b.css_blur_value)
                }
                a(this).val(b.blur_text)
            }
        })
},
sso:function(b){
    var d={
        bypass:false,
        login_button:"#sso_login, #sso_login_comment",
        signup_button:"#sso_signup"
    };
    
    b=a.extend(d,b);
    var e='<div id="login-modal-content" class="arial pt_10 c_abu" style="overflow:hidden;">';
    e+='<iframe src ="'+a("#sso_login a").attr("href")+'" width="330" height="300" frameborder="0" scrolling="no" style="overflow:hidden;">';
    e+="</div>";
    e+="<style>";
    e+=".simple_modal_wrap { overflow:hidden; }";
    e+="</style>";
    if(b.bypass){
        c()
        }
        a(b.login_button).click(function(f){
        c(f);
        return false
        });
    function c(f){
        if(!a("#login-modal-content").length){
            a("#sso_login").parent().append(e)
            }(f!=undefined)?f.preventDefault():false;
        a("#login-modal-content").modal()
        }
    },
submitComment:function(b,c){
    var e;
    var d={
        comment:"#comment_content",
        comment_info:"#comment_info",
        info_error:"Mohon maaf, harap ulangi kembali.<br />",
        info_success:"Terima kasih, komentar Anda telah kami terima.<br />",
        reply_comment:"#reply_content",
        reply_link:"a[rel*=comment_reply]",
        laporkan_link:"a[rel*=laporkankomentar]",
        reply_submit:"#reply_submit",
        submit_button:"#comment_submit"
    };
    
    c=a.extend(d,c);
    a(c.submit_button).click(function(){
        if(!a(c.comment_info).length){
            a(c.comment).parent().prepend('<span id="'+c.comment_info.substr(1)+'"></span><br/>')
            }
            var h=a(this);
        h.attr("disabled",true);
        h.next().attr("disabled",true);
        a(c.comment).attr("disabled",true);
        var g=a(c.comment).val();
        var f=a(this).parents("form:eq(0)").attr("action");
        if(a.trim(g).length){
            a.ajax({
                data:"txtID="+b+"&comment="+g,
                type:"POST",
                url:f,
                error:function(){
                    h.attr("disabled",false);
                    h.next().attr("disabled",false);
                    a(c.comment).attr("disabled",false);
                    a(c.comment_info).html(c.info_error)
                    },
                success:function(){
                    h.attr("disabled",false);
                    h.next().attr("disabled",false);
                    a(c.comment).attr("disabled",false).val("");
                    a(c.comment_info).html(c.info_success)
                    }
                })
        }else{
        h.attr("disabled",false);
        h.next().attr("disabled",false);
        a(c.comment).attr("disabled",false);
        a(c.comment_info).html(c.info_error)
        }
        return false
    });
a(c.reply_link).live("click",function(g){
    if(g.button==0){
        e=a(this);
        var f=location.href.split("/")[2];
        a.getJSON("http://"+f+"/api/is_loggedin",function(i){
            if(i.status==1){
                var j='<li class="sub" id="reply_block">';
                j+='<div class="left user_1 w50 pd_5" align="center">';
                j+='<img alt="" src="http://stat.k.kidsklik.com/data/2k10/images/user_1.jpg"/><br />';
                j+='<span class="c_blue_kompas">'+a("#user_name").text()+"</span>";
                j+="</div>";
                j+='<div class="right w470">';
                j+='<div class="font11 komentar2a">';
                j+="<div>";
                j+='<form action="'+a("#comment_form").attr("action")+'" method="post">';
                j+='<div><textarea name="reply_content" id="reply_content" class="form_2 w425 h60" rows="5" cols="40"></textarea></div>';
                j+='<div class="pt_10">';
                j+='<button type="submit" id="reply_submit" class="font11 pd_5">Submit</button> ';
                j+='<button type="reset" class="font11 pd_5">Reset</button>';
                j+="</div>";
                j+="</form>";
                j+="</div>";
                j+="</div>";
                j+='<div class="komentar2b"></div>';
                j+="</div>";
                j+='<div class="clearit"></div>';
                j+="</li>";
                var h=e.attr("id");
                h=h.split("_");
                if(a("#reply_block").length){
                    a("#reply_block").slideUp("fast",function(){
                        a(this).remove();
                        e.parents("li:eq(0)").after(j);
                        a("#reply_block").css("display","none").slideDown("fast",function(){
                            var k=a("#reply_block").offset().top;
                            a("html, body").animate({
                                scrollTop:k+"px"
                                })
                            })
                        })
                    }else{
                    e.parents("li:eq(0)").after(j);
                    a("#reply_block").css("display","none").slideDown("fast",function(){
                        var k=a("#reply_block").offset().top;
                        a("html, body").animate({
                            scrollTop:k+"px"
                            })
                        })
                    }
                }else{
            a(".fn_login").trigger("click")
            }
        })
}
return false
});
a(c.laporkan_link).live("click",function(g){
    if(g.button==0){
        e=a(this);
        var f=location.href.split("/")[2];
        a.getJSON("http://"+f+"/api/is_loggedin",function(h){
            if(h.status==1){
                a(c.laporkan_link).fancybox({
                    width:430,
                    height:180,
                    autoScale:true,
                    transitionIn:"over",
                    transitionOut:"over",
                    type:"iframe",
                    titleShow:false,
                    showNavArrows:false
                })
                }else{
                a(".fn_login").trigger("click")
                }
            })
    }
    return false
});
a(c.reply_submit).live("click",function(h){
    var i=a(c.reply_comment).val();
    var f=a("#comment_form").attr("action");
    var g=e.attr("id");
    g=g.split("_");
    a.ajax({
        data:"txtID="+b+"&comment="+i+"&parentid="+g[2],
        type:"POST",
        url:f,
        error:function(){
            alert("no!")
            },
        success:function(){
            var j=Math.floor(Math.random()*25);
            a(c.reply_comment).parents("div:eq(1)").html(a("#reply_content").val());
            a("#reply_block").attr("id","reply_block"+j)
            }
        });
return false
})
},
topstoriesCustom:function(c){
    var d={
        container:"#container_topstories",
        container2:"#container_topstories2",
        container_content:"li",
        container_id:"#topstories_",
        edit_button:"#mypaneltab2",
        edit_container:"#mypanelcontent2",
        input_checkbox:"#edit_topstories input",
        total:"#total_topstories",
        submit_button:"#topstories_submit"
    };
    
    c=a.extend(d,c);
    a(c.edit_button).live("click",function(){
        var e=a(c.container+" "+c.container_content).parent().attr("id");
        e=e.split("_");
        a(c.input_checkbox).each(function(){
            if(a(this).val()==e[1]){
                a(this).attr("checked",true)
                }
            })
    });
var b=true;
a(c.submit_button).click(function(){
    var e=parseInt(a(c.total).val()*3);
    var g=a(c.input_checkbox+":checked").val();
    if(!a(c.container_id+g+"_"+e).length&&b){
        b=false;
        var f=a(c.container).html();
        a(c.container).html("<ul><li>Loading data..</li></ul>");
        a(c.container2).empty();
        a.getJSON("http://api.kompas.com/data/get_topstories/"+g+"/"+e+"/?jsoncallback=?",function(h){
            if(h.status==1){
                a(h.results).each(function(k,j){
                    if(k==0){
                        a(c.container).html(j)
                        }else{
                        a(c.container2).html(j)
                        }
                    })
            }else{
            a(c.container).html(f)
            }
            b=true
        });
    savePreferences(c.container+":"+g+","+e)
    }
})
}
})
})
})(jQuery);
function savePreferences(c){
    var d=c.split(":");
    var l=d[0];
    var n=d[1];
    var b=jQuery.cookie("kompascom_layout");
    if(n.split(",")[0]==0){
        c=""
        }
        if(!b){
        var j=c
        }else{
        var m=b.split("|");
        var e=m.length;
        var a="";
        for(var f=0;f<e;f++){
            var k=m[f].split(":");
            var h=k[0];
            if(h==l){
                var g=n
                }else{
                var g=k[1]
                }
                a+=(f===0)?"":"|";
            a+=h+":"+g
            }
            if(e==1){
            if(h==l){
                var j=c
                }else{
                var j=m+"|"+c
                }
            }else{
        var j=a
        }
    }
jQuery.cookie("kompascom_layout",j,{
    expires:3
})
}
function init_layout(){
    var d=jQuery.cookie("kompascom_layout");
    if(!d){
        return
    }else{
        var a=d.split("|");
        for(var c=0;c<a.length;c++){
            var e=a[c].split(":");
            var f=e[0];
            var b=e[1];
            if(f=="#container_terkini"){
                showLatestNews(f,b)
                }else{
                showTopstories(f,b)
                }
            }
        }
}
function showLatestNews(g,d){
    var e=d.split(";");
    jQuery(g).empty();
    for(var c=0;c<e.length;c++){
        var a=e[c].split(",");
        var f=a[0];
        var b=a[1];
        jQuery.getJSON("http://api.kompas.com/data/lattest_article/"+f+"/"+b+"/?jsoncallback=?",function(h){
            if(h.status==1){
                jQuery(g).append(h.results)
                }
            })
    }
    }
function showTopstories(f,c){
    var d=parseInt(jQuery(f+" li").length);
    jQuery(f).empty();
    var a=c.split(",");
    var e=a[0];
    var b=a[1];
    jQuery.getJSON("http://api.kompas.com/data/get_topstories/"+e+"/"+d+"/?jsoncallback=?",function(g){
        if(g.status==1){
            jQuery(f).html(g.results)
            }
        })
}
var ddaccordion={
    contentclassname:{},
    expandone:function(c,d){
        this.toggleone(c,d,"expand")
        },
    collapseone:function(c,d){
        this.toggleone(c,d,"collapse")
        },
    expandall:function(f){
        var d=jQuery;
        var e=d("."+f);
        d("."+this.contentclassname[f]+":hidden").each(function(){
            e.eq(parseInt(d(this).attr("contentindex"))).trigger("evt_accordion")
            })
        },
    collapseall:function(f){
        var d=jQuery;
        var e=d("."+f);
        d("."+this.contentclassname[f]+":visible").each(function(){
            e.eq(parseInt(d(this).attr("contentindex"))).trigger("evt_accordion")
            })
        },
    toggleone:function(i,l,h){
        var k=jQuery;
        var j=k("."+i).eq(l);
        var g=k("."+this.contentclassname[i]).eq(l);
        if(typeof h=="undefined"||h=="expand"&&g.is(":hidden")||h=="collapse"&&g.is(":visible")){
            j.trigger("evt_accordion")
            }
        },
expandit:function(h,g,j,i,f){
    this.transformHeader(h,j,"expand");
    g.slideDown(j.animatespeed,function(){
        j.onopenclose(h.get(0),parseInt(h.attr("headerindex")),g.css("display"),i);
        if(j.postreveal=="gotourl"&&f){
            var a=(h.is("a"))?h.get(0):h.find("a:eq(0)").get(0);
            if(a){
                setTimeout(function(){
                    location=a.href
                    },200)
                }
            }
    })
},
collapseit:function(g,f,h,e){
    this.transformHeader(g,h,"collapse");
    f.slideUp(h.animatespeed,function(){
        h.onopenclose(g.get(0),parseInt(g.attr("headerindex")),f.css("display"),e)
        })
    },
transformHeader:function(f,e,d){
    f.addClass((d=="expand")?e.cssclass.expand:e.cssclass.collapse).removeClass((d=="expand")?e.cssclass.collapse:e.cssclass.expand);
    if(e.htmlsetting.location=="src"){
        f=(f.is("img"))?f:f.find("img").eq(0);
        f.attr("src",(d=="expand")?e.htmlsetting.expand:e.htmlsetting.collapse)
        }else{
        if(e.htmlsetting.location=="prefix"){
            f.find(".accordprefix").html((d=="expand")?e.htmlsetting.expand:e.htmlsetting.collapse)
            }else{
            if(e.htmlsetting.location=="suffix"){
                f.find(".accordsuffix").html((d=="expand")?e.htmlsetting.expand:e.htmlsetting.collapse)
                }
            }
    }
},
urlparamselect:function(c){
    var d=window.location.search.match(new RegExp(c+"=((\\d+)(,(\\d+))*)","i"));
    if(d!=null){
        d=RegExp.$1.split(",")
        }
        return d
    },
getCookie:function(d){
    var c=new RegExp(d+"=[^;]+","i");
    if(document.cookie.match(c)){
        return document.cookie.match(c)[0].split("=")[1]
        }
        return null
    },
setCookie:function(d,c){
    document.cookie=d+"="+c+"; path=/"
    },
init:function(b){
    document.write('<style type="text/css">\n');
    document.write("."+b.contentclass+"{display: none}\n");
    document.write("</style>");
    jQuery(document).ready(function(g){
        ddaccordion.urlparamselect(b.headerclass);
        var a=ddaccordion.getCookie(b.headerclass);
        ddaccordion.contentclassname[b.headerclass]=b.contentclass;
        b.cssclass={
            collapse:b.toggleclass[0],
            expand:b.toggleclass[1]
            };
            
        b.revealtype=b.revealtype||"click";
        b.revealtype=b.revealtype.replace(/mouseover/i,"mouseenter");
        if(b.revealtype=="clickgo"){
            b.postreveal="gotourl";
            b.revealtype="click"
            }
            if(typeof b.togglehtml=="undefined"){
            b.htmlsetting={
                location:"none"
            }
        }else{
        b.htmlsetting={
            location:b.togglehtml[0],
            collapse:b.togglehtml[1],
            expand:b.togglehtml[2]
            }
        }
    b.oninit=(typeof b.oninit=="undefined")?function(){}:b.oninit;
    b.onopenclose=(typeof b.onopenclose=="undefined")?function(){}:b.onopenclose;
    var j={};
    
    var h=ddaccordion.urlparamselect(b.headerclass)||((b.persiststate&&a!=null)?a:b.defaultexpanded);
    if(typeof h=="string"){
        h=h.replace(/c/ig,"").split(",")
        }
        var i=g("."+b.contentclass);
    if(h.length==1&&h[0]=="-1"){
        h=[]
        }
        if(b.collapseprev&&h.length>1){
        h=[h.pop()]
        }
        if(b.onemustopen&&h.length==0){
        h=[0]
        }
        g("."+b.headerclass).each(function(d){
        if(/(prefix)|(suffix)/i.test(b.htmlsetting.location)&&g(this).html()!=""){
            g('<span class="accordprefix"></span>').prependTo(this);
            g('<span class="accordsuffix"></span>').appendTo(this)
            }
            g(this).attr("headerindex",d+"h");
        i.eq(d).attr("contentindex",d+"c");
        var e=i.eq(d);
        var c=(typeof h[0]=="number")?d:d+"";
        if(jQuery.inArray(c,h)!=-1){
            if(b.animatedefault==false){
                e.show()
                }
                ddaccordion.expandit(g(this),e,b,false);
            j={
                $header:g(this),
                $content:e
            }
        }else{
        e.hide();
        b.onopenclose(g(this).get(0),parseInt(g(this).attr("headerindex")),e.css("display"),false);
        ddaccordion.transformHeader(g(this),b,"collapse")
        }
    });
g("."+b.headerclass).bind("evt_accordion",function(c,d){
    var e=i.eq(parseInt(g(this).attr("headerindex")));
    if(e.css("display")=="none"){
        ddaccordion.expandit(g(this),e,b,true,d);
        if(b.collapseprev&&j.$header&&g(this).get(0)!=j.$header.get(0)){
            ddaccordion.collapseit(j.$header,j.$content,b,true)
            }
            j={
            $header:g(this),
            $content:e
        }
    }else{
    if(!b.onemustopen||b.onemustopen&&j.$header&&g(this).get(0)!=j.$header.get(0)){
        ddaccordion.collapseit(g(this),e,b,true)
        }
    }
});
g("."+b.headerclass).bind(b.revealtype,function(){
    if(b.revealtype=="mouseenter"){
        clearTimeout(b.revealdelay);
        var c=parseInt(g(this).attr("headerindex"));
        b.revealdelay=setTimeout(function(){
            ddaccordion.expandone(b.headerclass,c)
            },b.mouseoverdelay||0)
        }else{
        g(this).trigger("evt_accordion",[true]);
        return false
        }
    });
g("."+b.headerclass).bind("mouseleave",function(){
    clearTimeout(b.revealdelay)
    });
b.oninit(g("."+b.headerclass).get(),h);
g(window).bind("unload",function(){
    g("."+b.headerclass).unbind();
    var c=[];
    g("."+b.contentclass+":visible").each(function(d){
        c.push(g(this).attr("contentindex"))
        });
    if(b.persiststate==true&&g("."+b.headerclass).length>0){
        c=(c.length==0)?"-1c":c;
        ddaccordion.setCookie(b.headerclass,c)
        }
    })
})
}
};
(function(h){
    var e=h.browser.msie&&parseInt(h.browser.version)==6&&typeof window.XMLHttpRequest!="object",g=null,f=[];
    h.modal=function(a,b){
        return h.modal.impl.init(a,b)
        };
        
    h.modal.close=function(){
        h.modal.impl.close()
        };
        
    h.fn.modal=function(a){
        return h.modal.impl.init(this,a)
        };
        
    h.modal.defaults={
        appendTo:"body",
        focus:true,
        opacity:50,
        overlayId:"simplemodal-overlay",
        overlayCss:{},
        containerId:"simplemodal-container",
        containerCss:{},
        dataId:"simplemodal-data",
        dataCss:{},
        minHeight:200,
        minWidth:300,
        maxHeight:null,
        maxWidth:null,
        autoResize:false,
        autoPosition:true,
        zIndex:1000,
        close:true,
        closeHTML:'<a class="modalCloseImg" title="Close"></a>',
        closeClass:"simplemodal-close",
        escClose:true,
        overlayClose:false,
        position:null,
        persist:false,
        onOpen:null,
        onShow:null,
        onClose:null
    };
    
    h.modal.impl={
        o:null,
        d:{},
        init:function(a,c){
            var b=this;
            if(b.d.data){
                return false
                }
                g=h.browser.msie&&!h.boxModel;
            b.o=h.extend({},h.modal.defaults,c);
            b.zIndex=b.o.zIndex;
            b.occb=false;
            if(typeof a=="object"){
                a=a instanceof jQuery?a:h(a);
                if(a.parent().parent().size()>0){
                    b.d.parentNode=a.parent();
                    if(!b.o.persist){
                        b.d.orig=a.clone(true)
                        }
                    }
            }else{
        if(typeof a=="string"||typeof a=="number"){
            a=h("<div></div>").html(a)
            }else{
            alert("SimpleModal Error: Unsupported data type: "+typeof a);
            return b
            }
        }
    b.create(a);
    a=null;
    b.open();
    if(h.isFunction(b.o.onShow)){
    b.o.onShow.apply(b,[b.d])
    }
    return b
},
create:function(a){
    var b=this;
    f=b.getDimensions();
    if(e){
        b.d.iframe=h('<iframe src="javascript:false;"></iframe>').css(h.extend(b.o.iframeCss,{
            display:"none",
            opacity:0,
            position:"fixed",
            height:f[0],
            width:f[1],
            zIndex:b.o.zIndex,
            top:0,
            left:0
        })).appendTo(b.o.appendTo)
        }
        b.d.overlay=h("<div></div>").attr("id",b.o.overlayId).addClass("simplemodal-overlay").css(h.extend(b.o.overlayCss,{
        display:"none",
        opacity:b.o.opacity/100,
        height:f[0],
        width:f[1],
        position:"fixed",
        left:0,
        top:0,
        zIndex:b.o.zIndex+1
        })).appendTo(b.o.appendTo);
    b.d.container=h("<div></div>").attr("id",b.o.containerId).addClass("simplemodal-container").css(h.extend(b.o.containerCss,{
        display:"none",
        position:"fixed",
        zIndex:b.o.zIndex+2
        })).append(b.o.close&&b.o.closeHTML?h(b.o.closeHTML).addClass(b.o.closeClass):"").appendTo(b.o.appendTo);
    b.d.wrap=h("<div></div>").attr("tabIndex",-1).addClass("simplemodal-wrap").css({
        height:"100%",
        outline:0,
        width:"100%"
    }).appendTo(b.d.container);
    b.d.data=a.attr("id",a.attr("id")||b.o.dataId).addClass("simplemodal-data").css(h.extend(b.o.dataCss,{
        display:"none"
    })).appendTo("body");
    a=null;
    b.setContainerDimensions();
    b.d.data.appendTo(b.d.wrap);
    if(e||g){
        b.fixIE()
        }
    },
bindEvents:function(){
    var a=this;
    h("."+a.o.closeClass).bind("click.simplemodal",function(b){
        b.preventDefault();
        a.close()
        });
    if(a.o.close&&a.o.overlayClose){
        a.d.overlay.bind("click.simplemodal",function(b){
            b.preventDefault();
            a.close()
            })
        }
        h(document).bind("keydown.simplemodal",function(b){
        if(a.o.focus&&b.keyCode==9){
            a.watchTab(b)
            }else{
            if((a.o.close&&a.o.escClose)&&b.keyCode==27){
                b.preventDefault();
                a.close()
                }
            }
    });
h(window).bind("resize.simplemodal",function(){
    f=a.getDimensions();
    a.setContainerDimensions(true);
    if(e||g){
        a.fixIE()
        }else{
        a.d.iframe&&a.d.iframe.css({
            height:f[0],
            width:f[1]
            });
        a.d.overlay.css({
            height:f[0],
            width:f[1]
            })
        }
    })
},
unbindEvents:function(){
    h("."+this.o.closeClass).unbind("click.simplemodal");
    h(document).unbind("keydown.simplemodal");
    h(window).unbind("resize.simplemodal");
    this.d.overlay.unbind("click.simplemodal")
    },
fixIE:function(){
    var b=this,a=b.o.position;
    h.each([b.d.iframe||null,b.d.overlay,b.d.container],function(c,C){
        if(C){
            var i="document.body.clientHeight",K="document.body.clientWidth",I="document.body.scrollHeight",L="document.body.scrollLeft",z="document.body.scrollTop",D="document.body.scrollWidth",E="document.documentElement.clientHeight",d="document.documentElement.clientWidth",s="document.documentElement.scrollLeft",H="document.documentElement.scrollTop",G=C[0].style;
            G.position="absolute";
            if(c<2){
                G.removeExpression("height");
                G.removeExpression("width");
                G.setExpression("height",""+I+" > "+i+" ? "+I+" : "+i+' + "px"');
                G.setExpression("width",""+D+" > "+K+" ? "+D+" : "+K+' + "px"')
                }else{
                var A,F;
                if(a&&a.constructor==Array){
                    var J=a[0]?typeof a[0]=="number"?a[0].toString():a[0].replace(/px/,""):C.css("top").replace(/px/,"");
                    A=J.indexOf("%")==-1?J+" + (t = "+H+" ? "+H+" : "+z+') + "px"':parseInt(J.replace(/%/,""))+" * (("+E+" || "+i+") / 100) + (t = "+H+" ? "+H+" : "+z+') + "px"';
                    if(a[1]){
                        var B=typeof a[1]=="number"?a[1].toString():a[1].replace(/px/,"");
                        F=B.indexOf("%")==-1?B+" + (t = "+s+" ? "+s+" : "+L+') + "px"':parseInt(B.replace(/%/,""))+" * (("+d+" || "+K+") / 100) + (t = "+s+" ? "+s+" : "+L+') + "px"'
                        }
                    }else{
                A="("+E+" || "+i+") / 2 - (this.offsetHeight / 2) + (t = "+H+" ? "+H+" : "+z+') + "px"';
                F="("+d+" || "+K+") / 2 - (this.offsetWidth / 2) + (t = "+s+" ? "+s+" : "+L+') + "px"'
                }
                G.removeExpression("top");
            G.removeExpression("left");
            G.setExpression("top",A);
            G.setExpression("left",F)
            }
        }
    })
},
focus:function(a){
    var c=this,b=a||"first";
    var d=h(":input:enabled:visible:"+b,c.d.wrap);
    d.length>0?d.focus():c.d.wrap.focus()
    },
getDimensions:function(){
    var a=h(window);
    var b=h.browser.opera&&h.browser.version>"9.5"&&h.fn.jquery<="1.2.6"?document.documentElement.clientHeight:h.browser.opera&&h.browser.version<"9.5"&&h.fn.jquery>"1.2.6"?window.innerHeight:a.height();
    return[b,a.width()]
    },
getVal:function(a){
    return a=="auto"?0:a.indexOf("%")>0?a:parseInt(a.replace(/px/,""))
    },
setContainerDimensions:function(m){
    var c=this;
    if(!m||(m&&c.o.autoResize)){
        var d=c.getVal(c.d.container.css("height")),p=c.getVal(c.d.container.css("width")),b=c.d.data.outerHeight(true),n=c.d.data.outerWidth(true);
        var o=c.o.maxHeight&&c.o.maxHeight<f[0]?c.o.maxHeight:f[0],a=c.o.maxWidth&&c.o.maxWidth<f[1]?c.o.maxWidth:f[1];
        if(!d){
            if(!b){
                d=c.o.minHeight
                }else{
                if(b>o){
                    d=o
                    }else{
                    if(b<c.o.minHeight){
                        d=c.o.minHeight
                        }else{
                        d=b
                        }
                    }
            }
    }else{
    d=d>o?o:d
    }
    if(!p){
    if(!n){
        p=c.o.minWidth
        }else{
        if(n>a){
            p=a
            }else{
            if(n<c.o.minWidth){
                p=c.o.minWidth
                }else{
                p=n
                }
            }
    }
}else{
    p=p>a?a:p
    }
    c.d.container.css({
    height:d,
    width:p
});
if(b>d||n>p){
    c.d.wrap.css({
        overflow:"auto"
    })
    }
}
if(c.o.autoPosition){
    c.setPosition()
    }
},
setPosition:function(){
    var d=this,b,c,a=(f[0]/2)-(d.d.container.outerHeight(true)/2),j=(f[1]/2)-(d.d.container.outerWidth(true)/2);
    if(d.o.position&&Object.prototype.toString.call(d.o.position)==="[object Array]"){
        b=d.o.position[0]||a;
        c=d.o.position[1]||j
        }else{
        b=a;
        c=j
        }
        d.d.container.css({
        left:c,
        top:b
    })
    },
watchTab:function(b){
    var c=this;
    if(h(b.target).parents(".simplemodal-container").length>0){
        c.inputs=h(":input:enabled:visible:first, :input:enabled:visible:last",c.d.data[0]);
        if((!b.shiftKey&&b.target==c.inputs[c.inputs.length-1])||(b.shiftKey&&b.target==c.inputs[0])||c.inputs.length==0){
            b.preventDefault();
            var a=b.shiftKey?"last":"first";
            setTimeout(function(){
                c.focus(a)
                },10)
            }
        }else{
    b.preventDefault();
    setTimeout(function(){
        c.focus()
        },10)
    }
},
open:function(){
    var a=this;
    a.d.iframe&&a.d.iframe.show();
    if(h.isFunction(a.o.onOpen)){
        a.o.onOpen.apply(a,[a.d])
        }else{
        a.d.overlay.show();
        a.d.container.show();
        a.d.data.show()
        }
        a.focus();
    a.bindEvents()
    },
close:function(){
    var a=this;
    if(!a.d.data){
        return false
        }
        a.unbindEvents();
    if(h.isFunction(a.o.onClose)&&!a.occb){
        a.occb=true;
        a.o.onClose.apply(a,[a.d])
        }else{
        if(a.d.parentNode){
            if(a.o.persist){
                a.d.data.hide().appendTo(a.d.parentNode)
                }else{
                a.d.data.hide().remove();
                a.d.orig.appendTo(a.d.parentNode)
                }
            }else{
        a.d.data.hide().remove()
        }
        a.d.container.hide().remove();
    a.d.overlay.hide().remove();
    a.d.iframe&&a.d.iframe.hide().remove();
    a.d={}
}
}
}
})(jQuery);
(function(aI){
    var az,au,ar,aF,al,aD,ap,ao,an,ax=0,aG={},aw=[],ay=0,aH={},aC=[],ak=null,av=new Image,ai=/\.(jpg|gif|png|bmp|jpeg)(.*)?$/i,w=/[^\.]\.(swf)\s*$/i,ah,ag=1,aB,aA,aE=false,aq=aI.extend(aI("<div/>")[0],{
        prop:0
    }),at=0,aa=!aI.support.opacity&&!window.XMLHttpRequest,af=function(){
        au.hide();
        av.onerror=av.onload=null;
        ak&&ak.abort();
        az.empty()
        },Z=function(){
        aI.fancybox('<p id="fancybox_error">The requested content cannot be loaded.<br />Please try again later.</p>',{
            scrolling:"no",
            padding:20,
            transitionIn:"none",
            transitionOut:"none"
        })
        },ae=function(){
        return[aI(window).width(),aI(window).height(),aI(document).scrollLeft(),aI(document).scrollTop()]
        },t=function(){
        var c=ae(),j={},i=aH.margin,e=aH.autoScale,g=(20+i)*2,b=(20+i)*2,h=aH.padding*2;
        if(aH.width.toString().indexOf("%")>-1){
            j.width=c[0]*parseFloat(aH.width)/100-40;
            e=false
            }else{
            j.width=aH.width+h
            }
            if(aH.height.toString().indexOf("%")>-1){
            j.height=c[1]*parseFloat(aH.height)/100-40;
            e=false
            }else{
            j.height=aH.height+h
            }
            if(e&&(j.width>c[0]-g||j.height>c[1]-b)){
            if(aG.type=="image"||aG.type=="swf"){
                g+=h;
                b+=h;
                e=Math.min(Math.min(c[0]-g,aH.width)/aH.width,Math.min(c[1]-b,aH.height)/aH.height);
                j.width=Math.round(e*(j.width-h))+h;
                j.height=Math.round(e*(j.height-h))+h
                }else{
                j.width=Math.min(j.width,c[0]-g);
                j.height=Math.min(j.height,c[1]-b)
                }
            }
        j.top=c[3]+(c[1]-(j.height+40))*0.5;
    j.left=c[2]+(c[0]-(j.width+40))*0.5;
    if(aH.autoScale===false){
        j.top=Math.max(c[3]+i,j.top);
        j.left=Math.max(c[2]+i,j.left)
        }
        return j
    },r=function(b){
    if(b&&b.length){
        switch(aH.titlePosition){
            case"inside":
                return b;
            case"over":
                return'<span id="fancybox-title-over">'+b+"</span>";
            default:
                return'<span id="fancybox-title-wrap"><span id="fancybox-title-left"></span><span id="fancybox-title-main">'+b+'</span><span id="fancybox-title-right"></span></span>'
                }
            }
    return false
},k=function(){
    var b=aH.title,e=aA.width-aH.padding*2,c="fancybox-title-"+aH.titlePosition;
    aI("#fancybox-title").remove();
    at=0;
    if(aH.titleShow!==false){
        b=aI.isFunction(aH.titleFormat)?aH.titleFormat(b,aC,ay,aH):r(b);
        if(!(!b||b==="")){
            aI('<div id="fancybox-title" class="'+c+'" />').css({
                width:e,
                paddingLeft:aH.padding,
                paddingRight:aH.padding
                }).html(b).appendTo("body");
            switch(aH.titlePosition){
                case"inside":
                    at=aI("#fancybox-title").outerHeight(true)-aH.padding;
                    aA.height+=at;
                    break;
                case"over":
                    aI("#fancybox-title").css("bottom",aH.padding);
                    break;
                default:
                    aI("#fancybox-title").css("bottom",aI("#fancybox-title").outerHeight(true)*-1)
                    }
                    aI("#fancybox-title").appendTo(al).hide()
            }
        }
},f=function(){
    aI(document).unbind("keydown.fb").bind("keydown.fb",function(b){
        if(b.keyCode==27&&aH.enableEscapeButton){
            b.preventDefault();
            aI.fancybox.close()
            }else{
            if(b.keyCode==37){
                b.preventDefault();
                aI.fancybox.prev()
                }else{
                if(b.keyCode==39){
                    b.preventDefault();
                    aI.fancybox.next()
                    }
                }
        }
    });
if(aI.fn.mousewheel){
    aF.unbind("mousewheel.fb");
    aC.length>1&&aF.bind("mousewheel.fb",function(b,c){
        b.preventDefault();
        aE||c===0||(c>0?aI.fancybox.prev():aI.fancybox.next())
        })
    }
    if(aH.showNavArrows){
    if(aH.cyclic&&aC.length>1||ay!==0){
        ao.show()
        }
        if(aH.cyclic&&aC.length>1||ay!=aC.length-1){
        an.show()
        }
    }
},ad=function(){
    aD.css("overflow",aH.scrolling=="auto"?aH.type=="image"||aH.type=="iframe"||aH.type=="swf"?"hidden":"auto":aH.scrolling=="yes"?"auto":"visible");
    if(!aI.support.opacity){
        aD.get(0).style.removeAttribute("filter");
        aF.get(0).style.removeAttribute("filter")
        }
        aI("#fancybox-title").show();
    aH.hideOnContentClick&&aD.one("click",aI.fancybox.close);
    aH.hideOnOverlayClick&&ar.one("click",aI.fancybox.close);
    aH.showCloseButton&&ap.show();
    f();
    aI(window).bind("resize.fb",aI.fancybox.center);
    aH.centerOnScroll?aI(window).bind("scroll.fb",aI.fancybox.center):aI(window).unbind("scroll.fb");
    aI.isFunction(aH.onComplete)&&aH.onComplete(aC,ay,aH);
    aE=false;
    var b,c;
    if(aC.length-1>ay){
        b=aC[ay+1].href;
        if(typeof b!=="undefined"&&b.match(ai)){
            c=new Image;
            c.src=b
            }
        }
    if(ay>0){
    b=aC[ay-1].href;
    if(typeof b!=="undefined"&&b.match(ai)){
        c=new Image;
        c.src=b
        }
    }
},ac=function(b){
    var e=Math.round(aB.width+(aA.width-aB.width)*b),c=Math.round(aB.height+(aA.height-aB.height)*b);
    aF.css({
        width:e+"px",
        height:c+"px",
        top:Math.round(aB.top+(aA.top-aB.top)*b)+"px",
        left:Math.round(aB.left+(aA.left-aB.left)*b)+"px"
        });
    e=Math.max(e-aH.padding*2,0);
    c=Math.max(c-(aH.padding*2+at*b),0);
    aD.css({
        width:e+"px",
        height:c+"px"
        });
    if(typeof aA.opacity!=="undefined"){
        aF.css("opacity",b<0.5?0.5:b)
        }
    },R=function(){
    var b=aG.orig?aI(aG.orig):false,c={};
    
    if(b&&b.length){
        c=b.offset();
        c.top+=parseFloat(b.css("paddingTop"))||0;
        c.left+=parseFloat(b.css("paddingLeft"))||0;
        c.top+=parseFloat(b.css("border-top-width"))||0;
        c.left+=parseFloat(b.css("border-left-width"))||0;
        c.width=b.width();
        c.height=b.height();
        c={
            width:c.width+aH.padding*2,
            height:c.height+aH.padding*2,
            top:c.top-aH.padding-20,
            left:c.left-aH.padding-20
            }
        }else{
    b=ae();
    c={
        width:1,
        height:1,
        top:b[3]+b[1]*0.5,
        left:b[2]+b[0]*0.5
        }
    }
return c
},ab=function(){
    au.hide();
    if(aF.is(":visible")&&aI.isFunction(aH.onCleanup)){
        if(aH.onCleanup(aC,ay,aH)===false){
            aI.event.trigger("fancybox-cancel");
            aE=false;
            return
        }
    }
    aC=aw;
ay=ax;
aH=aG;
aD.get(0).scrollTop=0;
aD.get(0).scrollLeft=0;
if(aH.overlayShow){
    aa&&aI("select:not(#fancybox-tmp select)").filter(function(){
        return this.style.visibility!=="hidden"
        }).css({
        visibility:"hidden"
    }).one("fancybox-cleanup",function(){
        this.style.visibility="inherit"
        });
    ar.css({
        "background-color":aH.overlayColor,
        opacity:aH.overlayOpacity
        }).unbind().show()
    }
    aA=t();
k();
if(aF.is(":visible")){
    aI(ap.add(ao).add(an)).hide();
    var b=aF.position(),c;
    aB={
        top:b.top,
        left:b.left,
        width:aF.width(),
        height:aF.height()
        };
        
    c=aB.width==aA.width&&aB.height==aA.height;
    aD.fadeOut(aH.changeFade,function(){
        var e=function(){
            aD.html(az.contents()).fadeIn(aH.changeFade,ad)
            };
            
        aI.event.trigger("fancybox-change");
        aD.empty().css("overflow","hidden");
        if(c){
            aD.css({
                top:aH.padding,
                left:aH.padding,
                width:Math.max(aA.width-aH.padding*2,1),
                height:Math.max(aA.height-aH.padding*2-at,1)
                });
            e()
            }else{
            aD.css({
                top:aH.padding,
                left:aH.padding,
                width:Math.max(aB.width-aH.padding*2,1),
                height:Math.max(aB.height-aH.padding*2,1)
                });
            aq.prop=0;
            aI(aq).animate({
                prop:1
            },{
                duration:aH.changeSpeed,
                easing:aH.easingChange,
                step:ac,
                complete:e
            })
            }
        })
}else{
    aF.css("opacity",1);
    if(aH.transitionIn=="elastic"){
        aB=R();
        aD.css({
            top:aH.padding,
            left:aH.padding,
            width:Math.max(aB.width-aH.padding*2,1),
            height:Math.max(aB.height-aH.padding*2,1)
            }).html(az.contents());
        aF.css(aB).show();
        if(aH.opacity){
            aA.opacity=0
            }
            aq.prop=0;
        aI(aq).animate({
            prop:1
        },{
            duration:aH.speedIn,
            easing:aH.easingIn,
            step:ac,
            complete:ad
        })
        }else{
        aD.css({
            top:aH.padding,
            left:aH.padding,
            width:Math.max(aA.width-aH.padding*2,1),
            height:Math.max(aA.height-aH.padding*2-at,1)
            }).html(az.contents());
        aF.css(aA).fadeIn(aH.transitionIn=="none"?0:aH.speedIn,ad)
        }
    }
},aj=function(){
    az.width(aG.width);
    az.height(aG.height);
    if(aG.width=="auto"){
        aG.width=az.width()
        }
        if(aG.height=="auto"){
        aG.height=az.height()
        }
        ab()
    },am=function(){
    af();
    var c=aw[ax],i,h,e,g,b;
    aG=aI.extend({},aI.fn.fancybox.defaults,typeof aI(c).data("fancybox")=="undefined"?aG:aI(c).data("fancybox"));
    e=c.title||aI(c).title||aG.title||"";
    if(c.nodeName&&!aG.orig){
        aG.orig=aI(c).children("img:first").length?aI(c).children("img:first"):aI(c)
        }
        if(e===""&&aG.orig){
        e=aG.orig.attr("alt")
        }
        i=c.nodeName&&/^(?:javascript|#)/i.test(c.href)?aG.href||null:aG.href||c.href||null;
    if(aG.type){
        h=aG.type;
        if(!i){
            i=aG.content
            }
        }else{
    if(aG.content){
        h="html"
        }else{
        if(i){
            if(i.match(ai)){
                h="image"
                }else{
                if(i.match(w)){
                    h="swf"
                    }else{
                    if(aI(c).hasClass("iframe")){
                        h="iframe"
                        }else{
                        if(i.match(/#/)){
                            c=i.substr(i.indexOf("#"));
                            h=aI(c).length>0?"inline":"ajax"
                            }else{
                            h="ajax"
                            }
                        }
                }
        }
}else{
    h="inline"
    }
}
}
aG.type=h;
aG.href=i;
aG.title=e;
if(aG.autoDimensions&&aG.type!=="iframe"&&aG.type!=="swf"){
    aG.width="auto";
    aG.height="auto"
    }
    if(aG.modal){
    aG.overlayShow=true;
    aG.hideOnOverlayClick=false;
    aG.hideOnContentClick=false;
    aG.enableEscapeButton=false;
    aG.showCloseButton=false
    }
    if(aI.isFunction(aG.onStart)){
    if(aG.onStart(aw,ax,aG)===false){
        aE=false;
        return
    }
}
az.css("padding",20+aG.padding+aG.margin);
aI(".fancybox-inline-tmp").unbind("fancybox-cancel").bind("fancybox-change",function(){
    aI(this).replaceWith(aD.children())
    });
switch(h){
    case"html":
        az.html(aG.content);
        aj();
        break;
    case"inline":
        aI('<div class="fancybox-inline-tmp" />').hide().insertBefore(aI(c)).bind("fancybox-cleanup",function(){
        aI(this).replaceWith(aD.children())
        }).bind("fancybox-cancel",function(){
        aI(this).replaceWith(az.children())
        });
    aI(c).appendTo(az);
        aj();
        break;
    case"image":
        aE=false;
        aI.fancybox.showActivity();
        av=new Image;
        av.onerror=function(){
        Z()
        };
        
    av.onload=function(){
        av.onerror=null;
        av.onload=null;
        aE=true;
        aG.width=av.width;
        aG.height=av.height;
        aI("<img />").attr({
            id:"fancybox-img",
            src:av.src,
            alt:aG.title
            }).appendTo(az);
        ab()
        };
        
    av.src=i;
    break;
    case"swf":
        g='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+aG.width+'" height="'+aG.height+'"><param name="movie" value="'+i+'"></param>';
        b="";
        aI.each(aG.swf,function(l,j){
        g+='<param name="'+l+'" value="'+j+'"></param>';
        b+=" "+l+'="'+j+'"'
        });
    g+='<embed src="'+i+'" type="application/x-shockwave-flash" width="'+aG.width+'" height="'+aG.height+'"'+b+"></embed></object>";
    az.html(g);
        aj();
        break;
    case"ajax":
        c=i.split("#",2);
        h=aG.ajax.data||{};
        
        if(c.length>1){
        i=c[0];
        if(typeof h=="string"){
            h+="&selector="+c[1]
            }else{
            h.selector=c[1]
            }
        }
    aE=false;
    aI.fancybox.showActivity();
    ak=aI.ajax(aI.extend(aG.ajax,{
        url:i,
        data:h,
        error:Z,
        success:function(j){
            if(ak.status==200){
                az.html(j);
                aj()
                }
            }
    }));
break;
case"iframe":
    aI('<iframe id="fancybox-frame" name="fancybox-frame'+(new Date).getTime()+'" frameborder="0" hspace="0" scrolling="'+aG.scrolling+'" src="'+aG.href+'"></iframe>').appendTo(az);
    ab()
    }
},d=function(){
    if(au.is(":visible")){
        aI("div",au).css("top",ag*-40+"px");
        ag=(ag+1)%12
        }else{
        clearInterval(ah)
        }
    },a=function(){
    if(!aI("#fancybox-wrap").length){
        aI("body").append(az=aI('<div id="fancybox-tmp"></div>'),au=aI('<div id="fancybox-loading"><div></div></div>'),ar=aI('<div id="fancybox-overlay"></div>'),aF=aI('<div id="fancybox-wrap"></div>'));
        if(!aI.support.opacity){
            aF.addClass("fancybox-ie");
            au.addClass("fancybox-ie")
            }
            al=aI('<div id="fancybox-outer"></div>').append('<div class="fancy-bg" id="fancy-bg-n"></div><div class="fancy-bg" id="fancy-bg-ne"></div><div class="fancy-bg" id="fancy-bg-e"></div><div class="fancy-bg" id="fancy-bg-se"></div><div class="fancy-bg" id="fancy-bg-s"></div><div class="fancy-bg" id="fancy-bg-sw"></div><div class="fancy-bg" id="fancy-bg-w"></div><div class="fancy-bg" id="fancy-bg-nw"></div>').appendTo(aF);
        al.append(aD=aI('<div id="fancybox-inner"></div>'),ap=aI('<a id="fancybox-close"></a>'),ao=aI('<a href="javascript:;" id="fancybox-left"><span class="fancy-ico" id="fancybox-left-ico"></span></a>'),an=aI('<a href="javascript:;" id="fancybox-right"><span class="fancy-ico" id="fancybox-right-ico"></span></a>'));
        ap.click(aI.fancybox.close);
        au.click(aI.fancybox.cancel);
        ao.click(function(b){
            b.preventDefault();
            aI.fancybox.prev()
            });
        an.click(function(b){
            b.preventDefault();
            aI.fancybox.next()
            });
        if(aa){
            ar.get(0).style.setExpression("height","document.body.scrollHeight > document.body.offsetHeight ? document.body.scrollHeight : document.body.offsetHeight + 'px'");
            au.get(0).style.setExpression("top","(-20 + (document.documentElement.clientHeight ? document.documentElement.clientHeight/2 : document.body.clientHeight/2 ) + ( ignoreMe = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop )) + 'px'");
            al.prepend('<iframe id="fancybox-hide-sel-frame" src="javascript:\'\';" scrolling="no" frameborder="0" ></iframe>')
            }
        }
};

aI.fn.fancybox=function(b){
    aI(this).data("fancybox",aI.extend({},b,aI.metadata?aI(this).metadata():{})).unbind("click.fb").bind("click.fb",function(c){
        c.preventDefault();
        if(!aE){
            aE=true;
            aI(this).blur();
            aw=[];
            ax=0;
            c=aI(this).attr("rel")||"";
            if(!c||c==""||c==="nofollow"){
                aw.push(this)
                }else{
                aw=aI("a[rel="+c+"], area[rel="+c+"]");
                ax=aw.index(this)
                }
                am();
            return false
            }
        });
return this
};

aI.fancybox=function(b,h){
    if(!aE){
        aE=true;
        var g=typeof h!=="undefined"?h:{};
        
        aw=[];
        ax=g.index||0;
        if(aI.isArray(b)){
            for(var c=0,e=b.length;c<e;c++){
                if(typeof b[c]=="object"){
                    aI(b[c]).data("fancybox",aI.extend({},g,b[c]))
                    }else{
                    b[c]=aI({}).data("fancybox",aI.extend({
                        content:b[c]
                        },g))
                    }
                }
            aw=jQuery.merge(aw,b)
        }else{
        if(typeof b=="object"){
            aI(b).data("fancybox",aI.extend({},g,b))
            }else{
            b=aI({}).data("fancybox",aI.extend({
                content:b
            },g))
            }
            aw.push(b)
        }
        if(ax>aw.length||ax<0){
        ax=0
        }
        am()
    }
};

aI.fancybox.showActivity=function(){
    clearInterval(ah);
    au.show();
    ah=setInterval(d,66)
    };
    
aI.fancybox.hideActivity=function(){
    au.hide()
    };
    
aI.fancybox.next=function(){
    return aI.fancybox.pos(ay+1)
    };
    
aI.fancybox.prev=function(){
    return aI.fancybox.pos(ay-1)
    };
    
aI.fancybox.pos=function(b){
    if(!aE){
        b=parseInt(b,10);
        if(b>-1&&aC.length>b){
            ax=b;
            am()
            }
            if(aH.cyclic&&aC.length>1&&b<0){
            ax=aC.length-1;
            am()
            }
            if(aH.cyclic&&aC.length>1&&b>=aC.length){
            ax=0;
            am()
            }
        }
};

aI.fancybox.cancel=function(){
    if(!aE){
        aE=true;
        aI.event.trigger("fancybox-cancel");
        af();
        aG&&aI.isFunction(aG.onCancel)&&aG.onCancel(aw,ax,aG);
        aE=false
        }
    };

aI.fancybox.close=function(){
    function b(){
        ar.fadeOut("fast");
        aF.hide();
        aI.event.trigger("fancybox-cleanup");
        aD.empty();
        aI.isFunction(aH.onClosed)&&aH.onClosed(aC,ay,aH);
        aC=aG=[];
        ay=ax=0;
        aH=aG={};
        
        aE=false
        }
        if(!(aE||aF.is(":hidden"))){
        aE=true;
        if(aH&&aI.isFunction(aH.onCleanup)){
            if(aH.onCleanup(aC,ay,aH)===false){
                aE=false;
                return
            }
        }
        af();
    aI(ap.add(ao).add(an)).hide();
    aI("#fancybox-title").remove();
    aF.add(aD).add(ar).unbind();
    aI(window).unbind("resize.fb scroll.fb");
    aI(document).unbind("keydown.fb");
    aD.css("overflow","hidden");
    if(aH.transitionOut=="elastic"){
        aB=R();
        var c=aF.position();
        aA={
            top:c.top,
            left:c.left,
            width:aF.width(),
            height:aF.height()
            };
            
        if(aH.opacity){
            aA.opacity=1
            }
            aq.prop=1;
        aI(aq).animate({
            prop:0
        },{
            duration:aH.speedOut,
            easing:aH.easingOut,
            step:ac,
            complete:b
        })
        }else{
        aF.fadeOut(aH.transitionOut=="none"?0:aH.speedOut,b)
        }
    }
};

aI.fancybox.resize=function(){
    var b,c;
    if(!(aE||aF.is(":hidden"))){
        aE=true;
        b=aD.wrapInner("<div style='overflow:auto'></div>").children();
        c=b.height();
        aF.css({
            height:c+aH.padding*2+at
            });
        aD.css({
            height:c
        });
        b.replaceWith(b.children());
        aI.fancybox.center()
        }
    };

aI.fancybox.center=function(){
    aE=true;
    var b=ae(),e=aH.margin,c={};
    
    c.top=b[3]+(b[1]-(aF.height()-at+40))*0.5;
    c.left=b[2]+(b[0]-(aF.width()+40))*0.5;
    c.top=Math.max(b[3]+e,c.top);
    c.left=Math.max(b[2]+e,c.left);
    aF.css(c);
    aE=false
    };
    
aI.fn.fancybox.defaults={
    padding:10,
    margin:20,
    opacity:false,
    modal:false,
    cyclic:false,
    scrolling:"auto",
    width:560,
    height:340,
    autoScale:true,
    autoDimensions:true,
    centerOnScroll:false,
    ajax:{},
    swf:{
        wmode:"transparent"
    },
    hideOnOverlayClick:true,
    hideOnContentClick:false,
    overlayShow:true,
    overlayOpacity:0.3,
    overlayColor:"#666",
    titleShow:true,
    titlePosition:"outside",
    titleFormat:null,
    transitionIn:"fade",
    transitionOut:"fade",
    speedIn:300,
    speedOut:300,
    changeSpeed:300,
    changeFade:"fast",
    easingIn:"swing",
    easingOut:"swing",
    showCloseButton:true,
    showNavArrows:true,
    enableEscapeButton:true,
    onStart:null,
    onCancel:null,
    onComplete:null,
    onCleanup:null,
    onClosed:null
};

aI(document).ready(function(){
    a()
    })
})(jQuery);