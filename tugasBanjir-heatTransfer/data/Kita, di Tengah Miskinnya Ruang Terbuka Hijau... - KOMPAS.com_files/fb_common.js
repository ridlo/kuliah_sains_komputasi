function countdown(a,b){var c=10;var d=setInterval(function(){c--;if(c==0){postNews(a,b);clearInterval(d)}},1e3)}function print_head(a){var b='<div id="left-bar"><img src="http://assets.kompas.com/js/fb_opengraph/images/ajax-loader.gif" style="margin: 2% 43%;"/></div>';b+='<div id="right-bar"><img src="http://assets.kompas.com/js/fb_opengraph/images/ajax-loader.gif" style="margin: 14% 43%;"/></div>';jQuery("#bar-fb").html(b);getFriends(a)}function postNews(a,b){jQuery.getJSON("http://api.kompas.com/2012/fbopengraph/kompas/ogdata.php?callback=?",{q:b},function(b){if(b.is_social){FB.api("/me/kompastimeline:read?article="+window.location.href+"&access_token="+a,"post",function(b){if(!b||b.error){if(b.error.code=="3501"){}else{}}else{console.log("terbaca");save_read(b.id,a)}});FB.api("/me/news.reads?article="+window.location.href+"&access_token="+a,"post",function(a){if(!a||a.error){if(a.error.code=="3501"){}else{}}else{}})}})}function getNews(a){var b=jQuery("#load_fb_stuff");FB.api("/me/kompastimeline:read&access_token="+a+"&limit=1000",function(a){var c="<h3>You read "+a.data.length+" News</h3>";var d=0;c+='<div id="box_slide">';c+='<ul class="news_list">';jQuery.each(a.data,function(a,b){if(d==5){c+='</ul><ul class="news_list">';d=0}var e=getTimestamp(b.start_time);c+='<li ><span class="txt">'+b.data.article.title+'</span><span class="time">'+e+'</span><span onclick="delete_news_record(this);" rel="'+b.id+'" class="del_butt"></span></li>';d++});c+="</ul>";c+="</div>";b.html(c);var e=jQuery(".news_list")[0];e.setAttribute("class","news_list tampil");cetak_page(0)})}function most_read(){var a="<h3>Artikel terbanyak di bagi</h3>";a+='<div class="paging-fb-news">';a+='<span class="next-news-fb" onclick="pagingM(\'next\');"></span>';a+='<span class="prev-news-fb" onclick="pagingM(\'prev\');"></span>';a+="</div>";a+='<div id="most_read">';jQuery("#right-bar").html(a);jQuery.ajax({type:"GET",url:"http://api.kompas.com/2012/fbopengraph/kompas/fb_proses.php?most_read=please&callback=?",dataType:"json",success:function(a){if(a.status==="success"){jQuery.each(a.data,function(a,b){check_most_read(b.read_id)})}}})}function check_most_read(a){FB.api("/"+a,function(a){if(a.data){var b=a.data.article.title;var c=a.data.article.url;var d=getTimestamp(a.start_time);var e='<div class="news_most">';if(jQuery(".news_most").length===0){var e='<div class="news_most tampil" >'}e+='<a href="'+c+'">'+b+"</a>";e+='<span class="time">'+d+"</span>";if(jQuery(".news_most").length<5){jQuery("#most_read").append(e)}}})}function save_read(a,b){FB.api("/"+a,function(a){var b=a.id;var c=a.data.article.id;var d=a.data.article.title;var e=a.data.article.type;var f=a.data.article.url;var g=a.from.id;jQuery.getJSON("http://api.kompas.com/2012/fbopengraph/kompas/fb_proses.php?callback=?",{read_id:b,id_artikel:c,title:d,type:e,url:f,uid:g},function(a){})})}function get_their_news(a,b,c,d){var e=jQuery(c).children(".newLoadbox");var f=0;if(jQuery(c).children(".recent").length>0){f=jQuery(c).children(".recent").html()}e.html('<img src="http://assets.kompas.com/js/fb_opengraph/images/ajax-loader.gif" style="margin: 7% 43%; border:none;" />');FB.api("/"+a+"/kompastimeline:read&access_token="+b+"&limit=5",function(b){var c=b.data.length;var g="https://graph.facebook.com/"+a+"/picture?type=square";var h='<div class="prof-box"><img src="'+g+'"/><h3>'+d+" read :</h3> <br/><h3>Aktivitas terbaru ("+f+") </h3></div>";h+='<div id="box_slide">';h+='<ul class="their_news_list tampil">';if(c>0){jQuery.each(b.data,function(a,b){var c=getTimestamp(b.start_time);if(b.data.length!==0){h+='<li ><span class="txt"><a href="'+b.data.article.url+'">'+b.data.article.title+'</a></span><span class="time">'+c+"</span></li>"}})}else{h+="<li>NO NEWS</li	>"}h+="</ul>";h+="</div>";h+='<div class="paging-fb-news">';h+="<span onclick=\"getMoreNews('"+b.paging.next+"',this,'"+d+"',"+a+","+f+'); return false;" class="next-news-fb" ></span>';h+="<span onclick=\"getMoreNews('"+b.paging.previous+"',this,'"+d+"',"+a+'); return false;" class="prev-news-fb" ></span>';h+="</div>";e.html(h)})}function getMoreNews(a,b,c,d,e){var f=jQuery(b).parents(".popup-fb");jQuery.ajax({type:"GET",url:a,dataType:"jsonp",success:function(a){if(a.data.length<=0){return false}var b="https://graph.facebook.com/"+d+"/picture?type=square";var e='<div class="prof-box">						<img src="'+b+'"/ width="30px" height="30px">						<h3 style="font-weight:bold">'+c+" read :</h3> <br/>						</div>";e+='<div id="box_slide">';e+='<ul class="their_news_list tampil">';jQuery.each(a.data,function(a,b){var c=getTimestamp(b.start_time);if(b.data.length!==0){e+='<li ><span class="txt"><a href="'+b.data.article.url+'">'+b.data.article.title+'</a></span><span class="time">'+c+"</span></li>"}});e+="</ul>";e+="</div>";e+='<div class="paging-fb-news">';e+="<span onclick=\"getMoreNews('"+a.paging.next+"',this,'"+c+"',"+d+'); return false;" class="next-news-fb" ></span>';e+="<span onclick=\"getMoreNews('"+a.paging.previous+"',this,'"+c+"',"+d+'); return false;" class="prev-news-fb" ></span>';e+="</div>";f.html(e);return false}});return false}function cetak_page(a){if(jQuery("#pp")){jQuery("#pp").remove()}var b=jQuery(".news_list");b.removeClass("tampil");b[a].setAttribute("class","news_list tampil");for(i=0;i<=b.length;i++){if(jQuery(b[i]).hasClass("tampil")===true){position=i}}var c="";if(b.length>0){if(position>0){c+='<a href="#" onclick="cetak_page('+parseInt(a-1)+'); return false;">prev</a>'}if(position<b.length-1){c+='<a href="#" onclick="cetak_page('+parseInt(a+1)+'); return false;">next</a>'}}jQuery("#load_fb_stuff").append('<span id="pp">'+c+"</span>")}function delete_news_record(a){a=jQuery(a);var b=a.attr("rel");var c=a.parent();FB.getLoginStatus(function(a){var c=a.authResponse.accessToken;FB.api("/"+b+"?access_token="+c,"DELETE",function(a){if(a){getNews(c)}})})}function performNews(a){var b=jQuery(a).parents("li").children(".popup-fb");if(b.html()!="")return false;var c=jQuery(a).parents("li");var d=jQuery(c).attr("rel");var e=jQuery(a).attr("title");var f=0;if(jQuery(c).children(".recent").length>0){f=jQuery(c).children(".recent").html();jQuery(c).children(".recent").remove()}b.html('<img src="http://assets.kompas.com/js/fb_opengraph/images/ajax-loader.gif" style="margin: 15% 43%; border:none;">');FB.getLoginStatus(function(a){var c=a.authResponse.accessToken;FB.api("/"+d+"/kompastimeline:read&access_token="+c+"&limit=5",function(a){var c=a.data.length;var g="https://graph.facebook.com/"+d+"/picture?type=square";var h='<div class="prof-box">						<img src="'+g+'"/ width="30px" height="30px">						<h3 style="font-weight:bold">'+e+" read :</h3> <br/>						<h3>Aktivitas terbaru ("+f+") </h3>						</div>";h+='<div id="box_slide">';h+='<ul class="their_news_list tampil">';if(c>0){jQuery.each(a.data,function(a,b){var c=getTimestamp(b.start_time);if(b.data.length!==0){h+='<li ><span class="txt"><a href="'+b.data.article.url+'">'+b.data.article.title+'</a></span><span class="time">'+c+"</span></li>"}})}else{h+="<li>NO NEWS</li	>"}h+="</ul>";h+="</div>";h+='<div class="paging-fb-news">';h+="<span onclick=\"getMoreNews('"+a.paging.next+"',this,'"+e+"',"+d+'); return false;" class="next-news-fb" ></span>';h+="<span onclick=\"getMoreNews('"+a.paging.previous+"',this,'"+e+"',"+d+'); return false;" class="prev-news-fb" ></span>';h+="</div>";b.html(h)})})}function pagingf(a){var b=0;var c=jQuery("#temans").children();for(i=0;i<c.length;i++){if(jQuery(c[i]).hasClass("tampil")){b=i}}c.removeClass("tampil");if(a==="next"){if(c.length-1===b){jQuery(c[b]).addClass("tampil");return false}jQuery(c[b+1]).addClass("tampil")}if(a==="prev"){if(b===0){jQuery(c[b]).addClass("tampil");return false}jQuery(c[b-1]).addClass("tampil")}}function pagingM(a){var b=0;var c=jQuery("#most_read").children();for(i=0;i<c.length;i++){if(jQuery(c[i]).hasClass("tampil")){b=i}}c.removeClass("tampil");if(a==="next"){if(c.length-1===b){jQuery(c[b]).addClass("tampil");return false}jQuery(c[b+1]).addClass("tampil")}if(a==="prev"){if(b===0){jQuery(c[b]).addClass("tampil");return false}jQuery(c[b-1]).addClass("tampil")}}function getFriends(a){FB.api({method:"fql.query",query:"SELECT uid,name,pic_square FROM user WHERE uid IN ( SELECT uid1 FROM friend WHERE uid2 = me() )  AND is_app_user = 1  LIMIT 50"},function(b){var c="<h3>Aktivitas Teman</h3>";c+='<div class="paging-fb-news">';c+="</div>";c+='<div id="temans">';c+="</div>";jQuery("#left-bar").html(c);d='<ul class="tampil temanku">';var e=0;ht="";var f="";b.sort(randOrd);jQuery.each(b,function(b,c){cetak_hasil(c.uid,a,function(a){if(a!=="oi"){if(jQuery(".teman").length<=12){ht+='<li  class="teman listed" rel="'+c.uid+'"  ><img class="icon-fb" src="'+c.pic_square+'"  title="'+c.name+'" onmouseover="performNews(this)" width="30px" height="30px"/>';ht+='<div class="popup-fb"></div>';ht+="</li>";jQuery(".temanku").append(ht)}}ht=""});ht=""});d+="</ul>";jQuery("#temans").append(d);var g=jQuery(".teman");var h=[];return false})}function cetak_hasil(a,b,c){hasil=FB.api("/"+a+"/kompastimeline:read&access_token="+b,function(a){if(a.data&&a.data.length>0){hasil=a}else{hasil="oi"}c(hasil)})}function randOrd(){return Math.round(Math.random())-.5}function checkPerform(a,b,c,d){var e=jQuery(b);if(jQuery(d.target).hasClass("newLoadbox")){if(!jQuery(d.target).hasClass("udah")){jQuery(d.target).addClass("udah")}else{jQuery(".newLoadbox").removeClass("show");e.removeClass("selected");jQuery(d.target).removeClass("udah");return false}}}function recent_read(a){var b=[];if(a.data){for(i=0;i<a.data.length;i++){if(diff_time(a.data[i].start_time)){b[i]=a}if(i===a.data.length-1){if(b.length>0){return b.length}b=[]}else{return 0}}}}function getMorefriend(a){if(a==="undefined")return false;jQuery("#left-bar").html('<img src="http://assets.kompas.com/js/fb_opengraph/images/ajax-loader.gif" style="margin: 7% 43%;"/>');jQuery.ajax({type:"GET",url:a,dataType:"jsonp",success:function(a){if(a.data.length<=0)getFriends();var b="<h3>Aktivitas Teman</h3>";b+='<div class="paging-fb-news">';b+="<span onclick=\"getMorefriend('"+a.paging.next+'\')" class="next-news-fb" ></span>';b+="<span onclick=\"getMorefriend('"+a.paging.previous+'\')" class="prev-news-fb" ></span>';b+="</div>";b+='<div id="temans"><ul>';jQuery.each(a.data,function(a,c){b+='<li  class="teman" ><img src="https://graph.facebook.com/'+c.id+'/picture" onclick="performNews('+c.id+",this,'"+c.name+'\')" title="'+c.name+'" /></li>'});b+="</ul></div>";jQuery("#left-bar").html(b)}})}function process_friends(a){var b=FB._authResponse.accessToken;var c=new Array;var d=0;jQuery.each(a.data,function(a,c){var d=c.id;FB.api("/"+d+"/kompastimeline:read&access_token="+b,function(a){console.log(a.data.length)})})}function proses_news(a,b,c){FB.api("/"+a+"/news.reads&access_token="+b,function(b){var d=b.data.length;if(parseInt(d)>0){var e="";jQuery.each(b.data,function(b,d){if(d.application.id==="324557847592228"){var f="https://graph.facebook.com/"+a+"/picture?type=small";e+='<div class="friend_list"><img src="'+f+'"/><span>'+c+" Read</span><h3>"+d.data.article.title+'</h3><a href="'+d.data.article.url+'">more..</a></div>'}});jQuery("#load_fb_stuff").append(e)}})}function do_login(){FB.login(function(a){if(a.authResponse){if(jQuery("#personalize-popbox")){close_gustipopbox()}var b='<div id="bar-fb">							</div>							<div id="ui_account">							</div>';jQuery("#bar-fb-content").html(b);FB.api("/me",function(a){var b=a.id;var c=encodeURIComponent(this.location.href);this.location.href="http://api.my.kompas.com/user/facebook_auth?app_id=kompascom&app_key=k01sbbdjweri938X&done="+c;checking_this_id(b)})}else{console.log("User cancel login or did not fully authorize.")}},{scope:"publish_stream,read_stream,publish_actions,user_actions.news,read_friendlists"})}function do_logout(){FB.logout(function(a){if(a.status==="unknown"){show_ui_login()}})}function show_uiaccount(a,b,c){var d="<h3>Aktivitas Anda</h3>";d+='<div class="img-box"><img src="'+a+'" / width="30px"  heigt="30px" ></div>';d+='<div class="account-detail">	<span class="pre-txt" style="color:#9f9f9f; margin-top:0;">You are login as</span>	<span class="pre-txt" style="font-weight:bold"> '+b+"</span>";d+='<ul id="list_ctrl" ><li class="list_btn_ctrl" onclick="simple_tab(this);" rel="1">Your Activity <img src="http://assets.kompas.com/js/fb_opengraph/images/fbbar_ico01.gif"></li>';if(c!==1){d+='<li class="list_btn_ctrl" onclick="simple_tab(this);" rel="2">Active:<img src="http://assets.kompas.com/js/fb_opengraph/images/red.png"></li>'}else{d+='<li class="list_btn_ctrl" onclick="simple_tab(this);" rel="2">Active:<img src="http://assets.kompas.com/js/fb_opengraph/images/fbbar_ico02.gif"></li>'}d+='<li class="list_btn_ctrl" onclick="simple_tab(this);" rel="3" style="border-right:none;">Pilihan <img src="http://assets.kompas.com/js/fb_opengraph/images/fbbar_ico01.gif"> </li>';d+="</ul></div>";d+='<div id="load_fb_stuff"></div>';jQuery("#ui_account").html(d)}function social_controls(a,b){jQuery.getJSON("http://api.kompas.com/2012/fbopengraph/kompas/ogdata.php?callback=?",{uid:b,turn:a},function(a){if(a.status==="success"){setCookie("fb_act_status",a.is_social,1);FB.api({method:"fql.query",query:"SELECT uid,name,pic_square FROM user WHERE uid ="+b},function(b){show_uiaccount(b[0].pic_square,b[0].name,a.is_social)})}})}function show_connect_to_fb(){var a='<div class="fb_bar_bfrlog_b">        	<div style="margin-right:10px;" class="left"><img src="http://assets.kompas.com/js/fb_opengraph/images/logo_fbtimeline.jpg"></div>            <div style="padding:5px 10px 5px 0px" class="left fbtimeline_t001">New</div>            <div style="margin-right:10px;" class="left fbtimeline_t002">Jelajahi Kompas.com Bersama Teman-Teman Facebook Anda</div>            <div style="padding:5px 10px 5px 0px" class="left fbtimeline_t001"><a href="http://www.kompas.com/4th/fbtimeline/" target="_blank">Learn more</a></div>            <div style="padding:3px" class="left"><a href="#" onclick="do_login(); return false;"><img border="0" src="http://assets.kompas.com/js/fb_opengraph/images/fbtimeline_aktifkan.jpg"></a></div>            <div class="clearit"></div>        </div>';var b='<span>Cukup dengan </span><img src="http://assets.kompas.com/js/fb_opengraph/images/connect_btn.png" alt="connect to facebook " title="connect to facebook" onclick="do_login(); return false;" class="btn_fb"/>';var c='<div class="text"><h2>Makin dekat bersama teman teman di KOMPAS.COM</h2>';c+="<p>Baca berita, tonton video dan bagikan aktivitas bersama teman-teman Anda. Ketahui juga apa yang menjadi favorit mereka, dan nikmati kedekatan menjelajah bersama di KOMPAS.COM</p></div>";el_to_load.innerHTML=b;head_bar.innerHTML=c;jQuery("#bar-fb-content").html(a)}function show_ui_login(){var a='<div class="fb_bar_bfrlog_b">        	<div style="margin-right:10px;" class="left"><img src="http://assets.kompas.com/js/fb_opengraph/images/logo_fbtimeline.jpg"></div>            <div style="padding:5px 10px 5px 0px" class="left fbtimeline_t001">New</div>            <div style="margin-right:10px;" class="left fbtimeline_t002">Jelajahi Kompas.com Bersama Teman-Teman Facebook Anda</div>            <div style="padding:5px 10px 5px 0px" class="left fbtimeline_t001"><a href="http://www.kompas.com/4th/fbtimeline/" target="_blank">Learn more</a></div>            <div style="padding:3px" class="left"><a href="#" onclick="do_login(); return false;"><img border="0" src="http://assets.kompas.com/js/fb_opengraph/images/fbtimeline_aktifkan.jpg"></a></div>            <div class="clearit"></div>        </div>';var b='<span>Cukup dengan </span><img src="http://assets.kompas.com/js/fb_opengraph/images/connect_btn.png" alt="connect to facebook " title="connect to facebook" onclick="do_login(); return false;" class="btn_fb"/>';var c='<div class="text"><h2>Makin dekat bersama teman teman di KOMPAS.COM</h2>';c+="<p>Baca berita, tonton video dan bagikan aktivitas bersama teman-teman Anda. Ketahui juga apa yang menjadi favorit mereka, dan nikmati kedekatan menjelajah bersama di KOMPAS.COM</p></div>";el_to_load.innerHTML=b;head_bar.innerHTML=c;jQuery("#bar-fb-content").html(a)}function simple_tab(a){var b='<ul id="options" ><li onclick="do_logout();">Not you ? Logout from facebook</li>';if(FB._userStatus==="connected")b+='<li onclick="cut_app();">Remove This Experience</li>';b+="</ul>";var c=jQuery(a);var d=jQuery("#load_fb_stuff");var e=c.hasClass("selected");jQuery(".list_btn_ctrl").removeClass("selected");c.addClass("selected");var f=c.attr("rel");if(f==="1"){d.addClass("show");d.html('<img src="http://assets.kompas.com/js/fb_opengraph/images/ajax-loader.gif" style="margin: 0 25%; padding: 50px;"/>');getNews()}else if(f==="3"){d.addClass("show");d.html(b)}else if(f==="2"){FB.getLoginStatus(function(a){var b=a.authResponse.userID;jQuery.getJSON("http://api.kompas.com/2012/fbopengraph/kompas/ogdata.php?callback=?",{q:b},function(a){var f='<ul id="options" >';if(a.is_social!==1){f+='<li onclick="social_controls(0,'+b+'); return false;">Turn On Social</li>'}else{f+='<li onclick="social_controls(1,'+b+'); return false;">Turn OFF Social</li>'}f+="</ul>";d.addClass("show");d.html(f);if(e===true){c.removeClass("selected");d.removeClass("show");return false;x}})})}if(e===true){c.removeClass("selected");d.removeClass("show");return false;x}}function cut_app(){FB.api({method:"Auth.revokeAuthorization"},function(a){if(a==true){show_connect_to_fb()}})}function checking_this_id(a,b){if(a==="undefined"){return false}else{jQuery.getJSON("http://api.kompas.com/2012/fbopengraph/kompas/ogdata.php?callback=?",{q:a},function(c){FB.api({method:"fql.query",query:"SELECT uid,name,pic_square FROM user WHERE uid ="+a},function(a){setCookie("fb_act_status",c.is_social,1);show_uiaccount(a[0].pic_square,a[0].name,c.is_social);print_head(b);most_read();jQuery("#bar-fb-content").show()})})}}function setCookie(a,b,c){var d=new Date;var e=d.getTime();e+=3600*1e3;d.setTime(e);var f=escape(b)+"; expires="+d.toGMTString();document.cookie=a+"="+f}function getCookie(a){var b,c,d,e=document.cookie.split(";");for(b=0;b<e.length;b++){c=e[b].substr(0,e[b].indexOf("="));d=e[b].substr(e[b].indexOf("=")+1);c=c.replace(/^\s+|\s+$/g,"");if(c==a){return unescape(d)}}return"no data"}function print_ui(){FB.api("/me",function(a){var b=a.name;var c=a.id;var d="https://graph.facebook.com/"+c+"/picture?type=square";var e=checking_this_id(c,b)})}function diff_time(a){var b=new Date(a);var c=new Date;var d=Math.floor((c-b)/1e3);if(d<5400){return 1}else{return 0}}function getTimestamp(a){return jQuery.timeago(a)}function parseTwitterDate(a){var b=(new Date(Date.parse(a))).toLocaleString().substr(0,16);var c=b.substr(-5,2);var d=c<12?" AM":" PM";if(c>12)c-=12;if(c==0)c=12;return b.substr(0,11)+""+c+b.substr(13)+d}function tgl_indo(a){var b=new String;var c="Minggu Senin Selasa Rabu Kamis Jumat Sabtu";c=c.split(" ");var d="Januari Februari Maret April Mei Juni Juli Agustus September Oktober Nopember Desember";d=d.split(" ");var e=new Date(a);var f=e.getDay();var g=e.getDate();var h=e.getMonth();var i=e.getFullYear();var j=e.getHours();var k=e.getMinutes();var l=j+":"+k;b=c[f]+", "+g+" "+d[h]+" "+i+", pukul "+l;return b}function close_gustipopbox(){jQuery("#overlay-personalize").remove();jQuery("#personalize-popbox").remove();return false}function gusti_popbox(a){jQuery("body").append('<div id="overlay-personalize" onclick="close_gustipopbox();"></div>');jQuery("body").append('<div id="personalize-popbox"><img src="http://ads2.kompas.com/layer/elexgame/assets/images/closebtn.png" onclick="close_gustipopbox();" style="cursor:pointer;float:right;margin-top:-33px;width: 69px;" />'+a.content+"</div>");jQuery("#overlay-personalize").css({background:"#000000","float":"left",height:"100%",left:0,margin:0,opacity:.4,padding:0,position:"fixed",top:0,width:"100%",zIndex:99});jQuery("#personalize-popbox").css({background:"#fff",height:a.height,left:0,margin:"0 auto",padding:"10px",position:"absolute",top:0,width:a.width,zIndex:99});var b=(jQuery(window).width()-jQuery("#personalize-popbox").outerWidth())/2;var c=(jQuery(window).height()-jQuery("#personalize-popbox").outerHeight())/2;jQuery("#personalize-popbox").css({left:b,top:c});return false}var el_to_load=document.getElementById("ui_account");var head_bar=document.getElementById("bar-fb")