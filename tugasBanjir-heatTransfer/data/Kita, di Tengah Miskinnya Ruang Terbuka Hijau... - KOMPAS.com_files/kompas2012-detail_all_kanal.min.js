/* 1504111743: kompas2012-detail_all_kanal.js */
(function(a){
    a(function(){
        var b=location.href.split("/")[2];
        var e=location.href.split("/")[3];
        var f=location.href.split("/")[4];
        var k=a("#article_id").val();
        var g=a("#article_sectionid").val();
        if(b=="travel.kompas.com"&&e=="readdirectory"){
            var l="http://"+document.domain+"/api/directory_count";
            a.directoryStatisticRead(k,{
                template:"%r"
            });
        }else{
            a.articleStatistic(k,{
                template:'<div class="left pr_3"><img src="http://stat.k.kidsklik.com/data/2k10/kompascom2011/images/icon_dibaca.gif" /></div><div class="left pr_10 font11">Dibaca: <span class="c_abu01_kompas2011"><strong>%r</strong></span></div><div class="left pr_3">'
            })
        }
        var domain=encodeURIComponent(window.location);
        var tag='';if (window.articletag === undefined) {tag='';}else{tag=window.articletag;}
        var l="http://api.kompas.com/index.php/data/incrementcount_url/?jsoncallback=?";
        a.ajax({
            url			: 	l,
            type		: 	"GET",
            dataType	: 	"jsonp",
            data		: 	{
                "textid" 		: 	k, 
                "flag" 			: 	"0",
                "domain"        	: 	domain,
            "articletag":tag
            },
            global		: 	false,
            success		: 	function (data) {
            },
            error		: 	function (xhr, msg, obj) {
            }
        });

        if(b=="vod.kompas.com"){
            a.listCommentVideo(k)
        }else{
            if(e=="readdirectory"){
                a.listCommentDirectory(k)
            }else{
                if(f=="readdirectory"){
                    a.listCommentDirectory(k)
                }else{
                    a.listComment(k)
                }
            }
        }
        if(b=="ramadhan.kompas.com"&&e=="readvideo"){
            a.listCommentVideo(k)
        }else{
            if(b=="ramadhan.kompas.com"&&e=="ngobrol"){
                a.listCommentNgobrolYuk(k)
            }
        }
        if(b=="obituari.kompas.com"&&e=="read"){
            a.listCommentObituari(k)
        }
        a.submitComment(k);
        a("a.iframe").fancybox({
            frameWidth:500,
            frameHeight:300
        });
        a(".btn_vote").click(function(){
            var n=a(this);
            if(n.val()=="Vote"){
                var o=parseInt(n.parent().find("input:checked").val());
                if(o>0){
                    n.attr("disabled",true).val("Sending vote..");
                    a.getJSON("http://api.kompas.com/data/updatePollingData/"+o+"/?jsoncallback=?",function(r){
                        if(r&&r.status==1){
                            var q='<div class="font10">';
                            var p=[];
                            a.each(r.detail,function(s,v){
                                p[s]=((0.8*v.Percentage)<5)?5:(0.8*v.Percentage);
                                q+='<div><span style="clear:both; display:block; float:left;">'+v.Option+'</span> <span style="background-color:#3399cc; color:#fff; display:block; float:right; margin:0 15px 1px 0; opacity:0.75; padding-left:2px; width:0;">'+v.Value+"</span></div>"
                            });
                            q+="</div>";
                            q+='<div class="clearit"></div>';
                            n.parents("div:eq(0)").html(q);
                            a(".poling span:odd").each(function(s){
                                a(this).animate({
                                    width:p[s]+"%"
                                },"slow")
                            })
                        }
                        n.attr("disabled",false)
                    })
                }
            }
            return false
        });
        a("a[rel=article_email]").click(function(){
            var n=location.href;
            var o=n.indexOf(".com/read/");
            n=n.substr(o+10,n.length);
            window.open("http://www1.kompas.com/sendnews/xml/"+n,"kompascom-email","toolbar=no,location=no,status=yes,scrollbars=yes,height=500,width=700");
            return false
        });
        a("a[rel=article_print]").click(function(){
            var n=location.href;
            var o=n.indexOf(".com/read/");
            n=n.substr(o+10,n.length);
            window.open("http://www1.kompas.com/printnews/xml/"+n,"kompascom-print","toolbar=no,location=no,status=yes,scrollbars=yes,height=500,width=700");
            return false
        });
        var j=12;
        var d=18;
        a("a.[title*=Biggest], a.[title*=Perbesar Huruf]").bind("click",function(){
            var o=a(".isi_berita2011 p");
            for(i=0;i<o.length;i++){
                if(o[i].style.fontSize){
                    var n=parseInt(o[i].style.fontSize.replace("px",""))
                }else{
                    var n=14
                }
                if(n!=d){
                    n+=1
                }
                o[i].style.fontSize=n+"px"
            }
        });
        a("a.[title*=Smaller], a.[title*=Perkecil Huruf]").bind("click",function(){
            var o=a(".isi_berita2011 p");
            for(i=0;i<o.length;i++){
                if(o[i].style.fontSize){
                    var n=parseInt(o[i].style.fontSize.replace("px",""))
                }else{
                    var n=14
                }
                if(n!=j){
                    n-=1
                }
                o[i].style.fontSize=n+"px"
            }
        });
        var c=true;
        a("#mykompas_like").click(function(){
            if(c){
                var n=a(this);
                a("#myk-err").remove();
                if(!a("#myk-ldr").length){
                    n.parent().append(' <img src="http://stat.k.kidsklik.com/data/2k10/images/ajax-loader.gif" id="myk-ldr" alt="" style="position:relative; top:-5px;" />')
                }
                c=false;
                a.getJSON("http://"+document.domain+"/mykompas/like/?title="+document.title.replace(" - KOMPAS.com","")+"&url="+location.href+"&jsoncallback=?",function(p){
                    if(p&&p.status==1){
                        n.parents("div:eq(0)").html('<span style="color:#555; font:bold 10px arial,helvetica,sans-serif; text-transform:uppercase;"><img src="http://stat.k.kidsklik.com/data/2k10/images/tick.png" style="vertical-align:middle;" /> Berita telah terpilih</span>')
                    }else{
                        a("#myk-ldr").remove();
                        var o='<span id="myk-err" style="color:#555; font:bold 10px arial,helvetica,sans-serif; position:relative; text-transform:uppercase; top:-8px;"> <img src="http://stat.k.kidsklik.com/data/2k10/images/exclamation.png" alt="" style="vertical-align:bottom;" /> Proses gagal, coba kembali</span>';
                        n.parent().append(o)
                    }
                    c=true;
                    a("#myk-ldr").remove()
                })
            }
            return false
        });
        a(".twitter-share-button").load(function(){
            a(this).contents().find("button").live("click",function(){
                jQuery.getJSON("http://api.my.kompas.com/panel/shareontwitter/?title="+document.title.replace(" - KOMPAS.com","")+"&url="+location.href+"&app_id=kompascom&app_key=k01sbbdjweri938X&jsoncallback=?")
            })
        });
        a("a[name=fb_share]").live("click",function(){
            a.getJSON("http://api.my.kompas.com/panel/shareonfacebook/?title="+document.title.replace(" - KOMPAS.com","")+"&url="+location.href+"&app_id=kompascom&app_key=k01sbbdjweri938X&jsoncallback=?")
        });
        a("a[rel=article_share]").click(function(){
            var n=(a("#share").css("visibility")=="hidden")?"visible":"hidden";
            a("#share").css("visibility",n)
        });
        function m(){
            u=location.href;
            t=document.title;
            window.open("http://www.facebook.com/sharer.php?u="+encodeURIComponent(u)+"&t="+encodeURIComponent(t),"sharer","toolbar=0,status=0,width=626,height=436");
            return false
        }
        a("a[rel=fb_share], a[rel=article_share_fb]").click(function(){
            a.getJSON("http://api.my.kompas.com/panel/shareonfacebook/?title="+document.title.replace(" - KOMPAS.com","")+"&url="+location.href+"&app_id=kompascom&app_key=k01sbbdjweri938X&jsoncallback=?");
            return m()
        });
        a(".tab_1:gt(0)").hide();
        var h=a(".tab_1").length;
        a(".htabs_1 a").click(function(){
            stringref=a(this).attr("href").split("#")[1];
            a(".tab_1:not(#"+stringref+")").hide();
            if(a.browser.msie&&a.browser.version.substr(0,3)=="6.0"){
                a(".tab_1#"+stringref).show()
            }else{
                a(".tab_1#"+stringref).show()
            }
            a(".htabs_1 a:not(#"+stringref+"t)").removeClass("select");
            a(".htabs_1 a[href=#"+stringref+"]").addClass("select");
            return false
        })
    })
})(jQuery);
var TweetThisLink={
    shorten:function(b){
        jQuery.getJSON("http://api.my.kompas.com/panel/shareontwitter/?title="+document.title.replace(" - KOMPAS.com","")+"&url="+location.href+"&app_id=kompascom&app_key=k01sbbdjweri938X&jsoncallback=?");
        b.preventDefault();
        var a=this.href.substr(this.href.indexOf("http:",5));
        BitlyClient.shorten(a,"TweetThisLink.response")
    },
    response:function(f){
        var c=null;
        for(var e in f.results){
            c=f.results[e]["shortUrl"];
            break
        }
        var d=jQuery(".judul_artikel2011").text();
        var a=d;
        var b=" via @kompasdotcom";
        document.location="http://twitter.com/home?status="+encodeURIComponent(a+" "+c+b)
    }
};

jQuery("button#btn, .tweetlink").live("click",TweetThisLink.shorten);